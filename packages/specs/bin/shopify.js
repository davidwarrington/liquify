#!/usr/bin/env node
"use strict";var Y=Object.create;var B=Object.defineProperty;var V=Object.getOwnPropertyDescriptor;var D=Object.getOwnPropertyNames;var E=Object.getPrototypeOf,Z=Object.prototype.hasOwnProperty;var A=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var z=(e,t,r,l)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of D(t))!Z.call(e,a)&&a!==r&&B(e,a,{get:()=>t[a],enumerable:!(l=V(t,a))||l.enumerable});return e};var _=(e,t,r)=>(r=e!=null?Y(E(e)):{},z(t||!e||!e.__esModule?B(r,"default",{value:e,enumerable:!0}):r,e));var H=A(O=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});var w=e=>{let[,t]=/([a-f\d]{3,6})/i.exec(e)||[],r=t?t.length:0;if(r===3)t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2];else if(r!==6)return[0,0,0];let l=parseInt(t,16);return[l>>16&255,l>>8&255,255&l]},h=(e,t,r)=>t>e?t:e>r?r:e,K=(e,t,r)=>{if(t==="")return e;let l=e.indexOf(t);if(l<0)return e;let a=t.length,o=0,c="";for(;~l;)c+=e.slice(o,l)+r,o=l+a,l=e.indexOf(t,o);return c+e.slice(o)},C={open:"",close:""},n=(e=>{let t=G=>!!c.find(I=>G.test(I)),r=e||(typeof process!="undefined"?process:{}),{stdout:l,platform:a}=r,o=r.env||{},c=r.argv||[],s="FORCE_COLOR"in o,i=o.FORCE_COLOR,g=i==="true"||parseInt(i)>0,d="NO_COLOR"in o||s&&!g||t(/^-{1,2}(no-color|color=false|color=never)$/),u=s&&g||t(/^-{1,2}(color|color=true|color=always)$/),f=l&&"isTTY"in l&&/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(o.TERM);return!d&&(u||f||a==="win32"||"CI"in o)})()?(e,t)=>({open:`\x1B[${e}m`,close:`\x1B[${t}m`}):()=>C,$=(e,t,r)=>n(`38;2;${e};${t};${r}`,39),P=(e,t,r)=>n(`48;2;${e};${t};${r}`,49),Q={visible:C,reset:n(0,0),inverse:n(7,27),hidden:n(8,28),bold:n(1,22),dim:n(2,22),faint:n(2,22),italic:n(3,23),underline:n(4,24),doubleUnderline:n(21,24),strikethrough:n(9,29),strike:n(9,29),frame:n(51,54),encircle:n(52,54),overline:n(53,55),black:n(30,39),red:n(31,39),green:n(32,39),yellow:n(33,39),blue:n(34,39),magenta:n(35,39),cyan:n(36,39),white:n(37,39),grey:n(90,39),gray:n(90,39),blackBright:n(90,39),redBright:n(91,39),greenBright:n(92,39),yellowBright:n(93,39),blueBright:n(94,39),magentaBright:n(95,39),cyanBright:n(96,39),whiteBright:n(97,39),bgBlack:n(40,49),bgRed:n(41,49),bgGreen:n(42,49),bgYellow:n(43,49),bgBlue:n(44,49),bgMagenta:n(45,49),bgCyan:n(46,49),bgWhite:n(47,49),bgBlackBright:n(100,49),bgRedBright:n(101,49),bgGreenBright:n(102,49),bgYellowBright:n(103,49),bgBlueBright:n(104,49),bgMagentaBright:n(105,49),bgCyanBright:n(106,49),bgWhiteBright:n(107,49)},{defineProperty:X,defineProperties:S,setPrototypeOf:F}=Object,W=/[\u001b\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-ORZcf-nqry=><]/g,k=/(\r*\n)/g,M=function(){let e=t=>t;return e.strip=t=>t.replace(W,""),e.extend=t=>{for(let r in t){let l=t[r],a=l.open!=null?l:$(...w(l));p[r]={get(){let o=N(this,a);return X(this,r,{value:o}),o}}}v=S(()=>{},p),F(e,v)},e.extend(Q),e},N=({props:e},{open:t,close:r})=>{let l=(c,...s)=>T(c,s,l.props),a=t,o=r;return e!==void 0&&(a=e.openStack+t,o=r+e.closeStack),F(l,v),l.props={open:t,close:r,openStack:a,closeStack:o,parent:e},l.open=a,l.close=o,l},T=(e,t,r)=>{if(!e)return"";let{openStack:l,closeStack:a}=r,o=e.raw!=null?String.raw(e,...t):e;if(~o.indexOf("\x1B"))for(;r!==void 0;)o=K(o,r.close,r.open),r=r.parent;return~o.indexOf(`
`)&&(o=o.replace(k,a+"$1"+l)),l+o+a},R={ansi:e=>(t=>n(`38;5;${t}`,39))(h(e,0,255)),bgAnsi:e=>(t=>n(`48;5;${t}`,49))(h(e,0,255)),hex:e=>$(...w(e)),bgHex:e=>P(...w(e)),rgb:(e,t,r)=>$(h(e,0,255),h(t,0,255),h(r,0,255)),bgRgb:(e,t,r)=>P(h(e,0,255),h(t,0,255),h(r,0,255))},p={},v;for(let e in R)p[e]={get(){return(...t)=>N(this,R[e](...t))}};p.ansi256=p.fg=p.ansi,p.bgAnsi256=p.bg=p.bgAnsi;var ee=new M;O.Ansis=M,O.default=ee});var U=A((se,y)=>{"use strict";var J=H();y.exports=J.default;y.exports.Ansis=J.Ansis});var x=_(require("fs")),q=require("path");var m=_(U()),L=process.cwd(),{log:b}=console;b("\x1B[H\x1B[2J");ne();function te(e,t,r){return`import { ${e} } from '../..'

export const ${t}: ${e} = ${r}`}function j(e){return e=e.replace(/&lt;/g,"<"),e=e.replace(/&gt;/g,">"),e=e.replace(/&quot;/g,'"'),e=e.replace(/&#39;/g,"'"),e=e.replace(/&amp;/g,"&"),e}function ne(){b(m.default.greenBright("Shopify Specifications"));let t=re().objects(),r=JSON.stringify(t,null,2);b(m.default.greenBright(`Writing JSON: ${m.default.whiteBright("data/liquid/shopify/objects.json")} `)),x.default.writeFileSync((0,q.join)(L,"data/liquid/shopify/objects.json"),r),b(m.default.greenBright(`Writing DATA: ${m.default.whiteBright("src/liquid/data/shopify/objects.ts")} `)),x.default.writeFileSync((0,q.join)(L,"src/liquid/data/shopify/objects.ts"),te("Objects","objects",r)),b(m.default.cyanBright("Generated Shopify Specifications")),b(m.default.gray("Passing to eslint"))}function re(){b(m.default.cyanBright("Shopify Objects"));let e=l=>({name:a,summary:o=null,description:c=null,examples:s,deprecated:i,deprecation_reason:g},d)=>{let u=[];if(i===!0&&(u.push("\u26A0\uFE0F **DEPRECATED** \u26A0\uFE0F"),g!==""?u.push(j(g),`
---`):u.push("No deprecation reason has been provided by the Shopify team \u{1F921}.",`
---`)),c!==""&&o!==null?j(c).trimStart()[0]===">"?u.push(o,`
`,j(c)):u.push(o+" "+j(c)):u.push(o),s.length>0){let[f]=s;f.name!==""?u.push(`
#### Example
`):u.push(`
#### ${f.name}
`),f.description!==""&&u.push(j(f.description)),f.raw_liquid!==""&&u.push("```liquid",j(f.raw_liquid),"```")}return u.push(`
---
`),d?u.push(`[Shopify Documentation](https://shopify.dev/docs/api/liquid/${l}/${d}#${a})`):u.push(`[Shopify Documentation](https://shopify.dev/docs/api/liquid/${l}/${a}`),u.join(`
`)},t=(l,a)=>{let o={scope:null,items:null,type:"any",literal:null},c=l[0].type,s=l[0].array_value;c==="string"||c==="boolean"||c==="number"?o.type=c:c==="array"?(o.type=c,s==="string"||s==="boolean"||s==="number"?o.items=s:o.scope=s):c!==""&&a.some(i=>i.name===c)&&(o.type="object",o.scope=c);for(let{name:i}of l)i!==""&&(o.literal===null&&(o.literal=[]),o.literal.push(i));return o};return{objects:()=>{let l=e("objects"),a=(0,q.join)(L,"node_modules/.specs/data","objects.json"),o=x.default.readFileSync(a).toString(),c=JSON.parse(o),s={};for(let i of c){if(b(m.default.blue(`- ${i.name}`)),s[i.name]={summary:i.summary},i.name.startsWith("content_for_")&&(s[i.name].const=!0),i.access.global===!0&&(s[i.name].global=i.access.global),i.deprecated===!0&&(s[i.name].deprecated=i.deprecated),s[i.name].description=l(i),i.return_type.length>0){let{type:g,scope:d,literal:u}=t(i.return_type,c);u!==null&&(s[i.name].literal=u),d!==null?(s[i.name].type=g,s[i.name].scope=d):s[i.name].type=g}if(i.properties.length>0){s[i.name].type="object",typeof s[i.name].properties!="object"&&(s[i.name].properties={});for(let g of i.properties)if(b(m.default.gray(`  - ${g.name}`)),s[i.name].properties[g.name]={type:22},s[i.name].properties[g.name].description=l(g,i.name),i.deprecated===!0&&(s[i.name].properties[g.name].deprecated=i.deprecated),g.return_type.length>0){let{type:d,scope:u,literal:f}=t(g.return_type,c);f!==null&&(s[i.name].properties[g.name].literal=f),u!==null?(s[i.name].properties[g.name].type=d,s[i.name].properties[g.name].scope=u):s[i.name].properties[g.name].type=d}}}return s}}}

#!/usr/bin/env node
"use strict";var V=Object.create;var F=Object.defineProperty;var X=Object.getOwnPropertyDescriptor;var Z=Object.getOwnPropertyNames;var z=Object.getPrototypeOf,K=Object.prototype.hasOwnProperty;var _=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Q=(e,t,o,l)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of Z(t))!K.call(e,a)&&a!==o&&F(e,a,{get:()=>t[a],enumerable:!(l=X(t,a))||l.enumerable});return e};var B=(e,t,o)=>(o=e!=null?V(z(e)):{},Q(t||!e||!e.__esModule?F(o,"default",{value:e,enumerable:!0}):o,e));var J=_(w=>{"use strict";Object.defineProperty(w,"__esModule",{value:!0});var L=e=>{let[,t]=/([a-f\d]{3,6})/i.exec(e)||[],o=t?t.length:0;if(o===3)t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2];else if(o!==6)return[0,0,0];let l=parseInt(t,16);return[l>>16&255,l>>8&255,255&l]},j=(e,t,o)=>t>e?t:e>o?o:e,S=(e,t,o)=>{if(t==="")return e;let l=e.indexOf(t);if(l<0)return e;let a=t.length,r=0,f="";for(;~l;)f+=e.slice(r,l)+o,r=l+a,l=e.indexOf(t,r);return f+e.slice(r)},H={open:"",close:""},n=(e=>{let t=q=>!!f.find(d=>q.test(d)),o=e||(typeof process!="undefined"?process:{}),{stdout:l,platform:a}=o,r=o.env||{},f=o.argv||[],i="FORCE_COLOR"in r,s=r.FORCE_COLOR,c=s==="true"||parseInt(s)>0,u="NO_COLOR"in r||i&&!c||t(/^-{1,2}(no-color|color=false|color=never)$/),p=i&&c||t(/^-{1,2}(color|color=true|color=always)$/),b=l&&"isTTY"in l&&/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(r.TERM);return!u&&(p||b||a==="win32"||"CI"in r)})()?(e,t)=>({open:`\x1B[${e}m`,close:`\x1B[${t}m`}):()=>H,A=(e,t,o)=>n(`38;2;${e};${t};${o}`,39),N=(e,t,o)=>n(`48;2;${e};${t};${o}`,49),D={visible:H,reset:n(0,0),inverse:n(7,27),hidden:n(8,28),bold:n(1,22),dim:n(2,22),faint:n(2,22),italic:n(3,23),underline:n(4,24),doubleUnderline:n(21,24),strikethrough:n(9,29),strike:n(9,29),frame:n(51,54),encircle:n(52,54),overline:n(53,55),black:n(30,39),red:n(31,39),green:n(32,39),yellow:n(33,39),blue:n(34,39),magenta:n(35,39),cyan:n(36,39),white:n(37,39),grey:n(90,39),gray:n(90,39),blackBright:n(90,39),redBright:n(91,39),greenBright:n(92,39),yellowBright:n(93,39),blueBright:n(94,39),magentaBright:n(95,39),cyanBright:n(96,39),whiteBright:n(97,39),bgBlack:n(40,49),bgRed:n(41,49),bgGreen:n(42,49),bgYellow:n(43,49),bgBlue:n(44,49),bgMagenta:n(45,49),bgCyan:n(46,49),bgWhite:n(47,49),bgBlackBright:n(100,49),bgRedBright:n(101,49),bgGreenBright:n(102,49),bgYellowBright:n(103,49),bgBlueBright:n(104,49),bgMagentaBright:n(105,49),bgCyanBright:n(106,49),bgWhiteBright:n(107,49)},{defineProperty:W,defineProperties:k,setPrototypeOf:U}=Object,T=/[\u001b\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-ORZcf-nqry=><]/g,ee=/(\r*\n)/g,I=function(){let e=t=>t;return e.strip=t=>t.replace(T,""),e.extend=t=>{for(let o in t){let l=t[o],a=l.open!=null?l:A(...L(l));h[o]={get(){let r=E(this,a);return W(this,o,{value:r}),r}}}R=k(()=>{},h),U(e,R)},e.extend(D),e},E=({props:e},{open:t,close:o})=>{let l=(f,...i)=>te(f,i,l.props),a=t,r=o;return e!==void 0&&(a=e.openStack+t,r=o+e.closeStack),U(l,R),l.props={open:t,close:o,openStack:a,closeStack:r,parent:e},l.open=a,l.close=r,l},te=(e,t,o)=>{if(!e)return"";let{openStack:l,closeStack:a}=o,r=e.raw!=null?String.raw(e,...t):e;if(~r.indexOf("\x1B"))for(;o!==void 0;)r=S(r,o.close,o.open),o=o.parent;return~r.indexOf(`
`)&&(r=r.replace(ee,a+"$1"+l)),l+r+a},M={ansi:e=>(t=>n(`38;5;${t}`,39))(j(e,0,255)),bgAnsi:e=>(t=>n(`48;5;${t}`,49))(j(e,0,255)),hex:e=>A(...L(e)),bgHex:e=>N(...L(e)),rgb:(e,t,o)=>A(j(e,0,255),j(t,0,255),j(o,0,255)),bgRgb:(e,t,o)=>N(j(e,0,255),j(t,0,255),j(o,0,255))},h={},R;for(let e in M)h[e]={get(){return(...t)=>E(this,M[e](...t))}};h.ansi256=h.fg=h.ansi,h.bgAnsi256=h.bg=h.bgAnsi;var ne=new I;w.Ansis=I,w.default=ne});var G=_((ce,P)=>{"use strict";var Y=J();P.exports=Y.default;P.exports.Ansis=Y.Ansis});var v=B(require("fs")),y=require("path");var g=B(G()),C=process.cwd(),$=`${g.default.gray("[")}SPECS${g.default.gray("]")} ${g.default.magenta("RUN")}`,{log:O}=console;ie();function re(e,t,o){return`import { ${e} } from '../..'

export const ${t}: ${e} = ${o}`}function x(e){return e=e.replace(/&lt;/g,"<"),e=e.replace(/&gt;/g,">"),e=e.replace(/&quot;/g,'"'),e=e.replace(/&#39;/g,"'"),e=e.replace(/&amp;/g,"&"),e}function ie(){O(`${$} ${g.default.magenta.bold("Building Shopify Specifications")}`),oe()}function oe(){O(`${$} ${g.default.cyan("Shopify Objects")}`);let e=({name:i,summary:s=null,description:c=null,examples:u,deprecated:p,deprecation_reason:b},q)=>{let d=[];if(p===!0&&(d.push("\u26A0\uFE0F **DEPRECATED** \u26A0\uFE0F"),b!==""?d.push(x(b),"---"):d.push("No deprecation reason has been provided by the Shopify team \u{1F921}.","---")),c!==""&&s!==null){let m=x(c).replace(/>\s(Tip|Note):/g,`

**$1**
`).replace(/\(\/(docs\/api.*(?=\)))/g,"(https://shopify.dev/$1");m.trimStart()[0]===">"?d.push(s,m):d.push(s+" "+m)}else d.push(s);if(u.length>0){let[m]=u;m.name!==""?d.push("#### Example"):d.push(`#### ${m.name}`),m.description!==""&&d.push(x(m.description)),m.raw_liquid!==""&&d.push("```liquid",x(m.raw_liquid),"```")}return d.push("---"),q?d.push(`[Shopify Liquid](https://shopify.dev/docs/api/liquid/objects/${q}#${i})

`):d.push(`[Shopify Liquid](https://shopify.dev/docs/api/liquid/objects/${i})

`),d.join(`

`)},t=(i,s)=>{let c={scope:null,items:null,type:"any",literal:null},u=i[0].type,p=i[0].array_value;u==="string"||u==="boolean"||u==="number"?c.type=u:u==="array"?(c.type=u,p==="string"||p==="boolean"||p==="number"?c.items=p:c.scope=p):u!==""&&s.some(b=>b.name===u)&&(c.type="object",c.scope=u);for(let{name:b}of i)b!==""&&(c.literal===null&&(c.literal=[]),c.literal.push(b));return c},o=(0,y.join)(C,"node_modules/.specs/data","objects.json"),l=v.default.readFileSync(o).toString(),a=JSON.parse(l),r={};for(let i of a){if(r[i.name]={summary:i.summary},i.access.global===!0&&(r[i.name].global=i.access.global),i.deprecated===!0&&(r[i.name].deprecated=i.deprecated),i.access.template.length>0&&(r[i.name].template=i.access.template),r[i.name].description=e(i),i.return_type.length>0){let{type:s,scope:c,literal:u}=t(i.return_type,a);u!==null&&(r[i.name].literal=u),c!==null?(r[i.name].type=s,r[i.name].scope=c):r[i.name].type=s}if(i.properties.length>0){r[i.name].type="object",typeof r[i.name].properties!="object"&&(r[i.name].properties={});for(let s of i.properties)if(r[i.name].properties[s.name]={type:22},r[i.name].properties[s.name].description=e(s,i.name),i.deprecated===!0&&(r[i.name].properties[s.name].deprecated=i.deprecated),s.return_type.length>0){let{type:c,scope:u,literal:p}=t(s.return_type,a);p!==null&&(r[i.name].properties[s.name].literal=p),u!==null?(r[i.name].properties[s.name].type=c,r[i.name].properties[s.name].scope=u):r[i.name].properties[s.name].type=c}}else r[i.name].type!=="array"&&(r[i.name].const=!0)}let f=JSON.stringify(r,null,2);O($+g.default.cyan(` Writing objects JSON: ${g.default.whiteBright("data/liquid/shopify/objects.json")} `)),v.default.writeFileSync((0,y.join)(C,"data/liquid/shopify/objects.json"),f),O($+g.default.cyan(` Writing objects DATA: ${g.default.whiteBright("src/liquid/data/shopify/objects.ts")} `)),v.default.writeFileSync((0,y.join)(C,"src/liquid/data/shopify/objects.ts"),re("Objects","objects",f)),O(`${$} ${g.default.magenta.bold("Finished Shopify Specifications")}`)}

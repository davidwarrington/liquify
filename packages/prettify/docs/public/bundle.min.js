var Ve=class{constructor(e,t,n){this.eventTarget=e,this.eventName=t,this.eventOptions=n,this.unorderedBindings=new Set}connect(){this.eventTarget.addEventListener(this.eventName,this,this.eventOptions)}disconnect(){this.eventTarget.removeEventListener(this.eventName,this,this.eventOptions)}bindingConnected(e){this.unorderedBindings.add(e)}bindingDisconnected(e){this.unorderedBindings.delete(e)}handleEvent(e){let t=As(e);for(let n of this.bindings){if(t.immediatePropagationStopped)break;n.handleEvent(t)}}hasBindings(){return this.unorderedBindings.size>0}get bindings(){return Array.from(this.unorderedBindings).sort((e,t)=>{let n=e.index,r=t.index;return n<r?-1:n>r?1:0})}};function As(s){if("immediatePropagationStopped"in s)return s;{let{stopImmediatePropagation:e}=s;return Object.assign(s,{immediatePropagationStopped:!1,stopImmediatePropagation(){this.immediatePropagationStopped=!0,e.call(this)}})}}var Ne=class{constructor(e){this.application=e,this.eventListenerMaps=new Map,this.started=!1}start(){this.started||(this.started=!0,this.eventListeners.forEach(e=>e.connect()))}stop(){this.started&&(this.started=!1,this.eventListeners.forEach(e=>e.disconnect()))}get eventListeners(){return Array.from(this.eventListenerMaps.values()).reduce((e,t)=>e.concat(Array.from(t.values())),[])}bindingConnected(e){this.fetchEventListenerForBinding(e).bindingConnected(e)}bindingDisconnected(e,t=!1){this.fetchEventListenerForBinding(e).bindingDisconnected(e),t&&this.clearEventListenersForBinding(e)}handleError(e,t,n={}){this.application.handleError(e,`Error ${t}`,n)}clearEventListenersForBinding(e){let t=this.fetchEventListenerForBinding(e);t.hasBindings()||(t.disconnect(),this.removeMappedEventListenerFor(e))}removeMappedEventListenerFor(e){let{eventTarget:t,eventName:n,eventOptions:r}=e,i=this.fetchEventListenerMapForEventTarget(t),o=this.cacheKey(n,r);i.delete(o),i.size==0&&this.eventListenerMaps.delete(t)}fetchEventListenerForBinding(e){let{eventTarget:t,eventName:n,eventOptions:r}=e;return this.fetchEventListener(t,n,r)}fetchEventListener(e,t,n){let r=this.fetchEventListenerMapForEventTarget(e),i=this.cacheKey(t,n),o=r.get(i);return o||(o=this.createEventListener(e,t,n),r.set(i,o)),o}createEventListener(e,t,n){let r=new Ve(e,t,n);return this.started&&r.connect(),r}fetchEventListenerMapForEventTarget(e){let t=this.eventListenerMaps.get(e);return t||(t=new Map,this.eventListenerMaps.set(e,t)),t}cacheKey(e,t){let n=[e];return Object.keys(t).sort().forEach(r=>{n.push(`${t[r]?"":"!"}${r}`)}),n.join(":")}},Os={stop({event:s,value:e}){return e&&s.stopPropagation(),!0},prevent({event:s,value:e}){return e&&s.preventDefault(),!0},self({event:s,value:e,element:t}){return e?t===s.target:!0}},Cs=/^(?:(.+?)(?:\.(.+?))?(?:@(window|document))?->)?(.+?)(?:#([^:]+?))(?::(.+))?$/;function Ss(s){let t=s.trim().match(Cs)||[],n=t[1],r=t[2];return r&&!["keydown","keyup","keypress"].includes(n)&&(n+=`.${r}`,r=""),{eventTarget:Ms(t[3]),eventName:n,eventOptions:t[6]?$s(t[6]):{},identifier:t[4],methodName:t[5],keyFilter:r}}function Ms(s){if(s=="window")return window;if(s=="document")return document}function $s(s){return s.split(":").reduce((e,t)=>Object.assign(e,{[t.replace(/^!/,"")]:!/^!/.test(t)}),{})}function Ts(s){if(s==window)return"window";if(s==document)return"document"}function st(s){return s.replace(/(?:[_-])([a-z0-9])/g,(e,t)=>t.toUpperCase())}function De(s){return st(s.replace(/--/g,"-").replace(/__/g,"_"))}function le(s){return s.charAt(0).toUpperCase()+s.slice(1)}function Lt(s){return s.replace(/([A-Z])/g,(e,t)=>`-${t.toLowerCase()}`)}function Ls(s){return s.match(/[^\s]+/g)||[]}var Pe=class{constructor(e,t,n,r){this.element=e,this.index=t,this.eventTarget=n.eventTarget||e,this.eventName=n.eventName||Bs(e)||ve("missing event name"),this.eventOptions=n.eventOptions||{},this.identifier=n.identifier||ve("missing identifier"),this.methodName=n.methodName||ve("missing method name"),this.keyFilter=n.keyFilter||"",this.schema=r}static forToken(e,t){return new this(e.element,e.index,Ss(e.content),t)}toString(){let e=this.keyFilter?`.${this.keyFilter}`:"",t=this.eventTargetName?`@${this.eventTargetName}`:"";return`${this.eventName}${e}${t}->${this.identifier}#${this.methodName}`}isFilterTarget(e){if(!this.keyFilter)return!1;let t=this.keyFilter.split("+"),n=["meta","ctrl","alt","shift"],[r,i,o,a]=n.map(p=>t.includes(p));if(e.metaKey!==r||e.ctrlKey!==i||e.altKey!==o||e.shiftKey!==a)return!0;let l=t.filter(p=>!n.includes(p))[0];return l?(Object.prototype.hasOwnProperty.call(this.keyMappings,l)||ve(`contains unknown key filter: ${this.keyFilter}`),this.keyMappings[l].toLowerCase()!==e.key.toLowerCase()):!1}get params(){let e={},t=new RegExp(`^data-${this.identifier}-(.+)-param$`,"i");for(let{name:n,value:r}of Array.from(this.element.attributes)){let i=n.match(t),o=i&&i[1];o&&(e[st(o)]=Fs(r))}return e}get eventTargetName(){return Ts(this.eventTarget)}get keyMappings(){return this.schema.keyMappings}},St={a:()=>"click",button:()=>"click",form:()=>"submit",details:()=>"toggle",input:s=>s.getAttribute("type")=="submit"?"click":"input",select:()=>"change",textarea:()=>"input"};function Bs(s){let e=s.tagName.toLowerCase();if(e in St)return St[e](s)}function ve(s){throw new Error(s)}function Fs(s){try{return JSON.parse(s)}catch{return s}}var je=class{constructor(e,t){this.context=e,this.action=t}get index(){return this.action.index}get eventTarget(){return this.action.eventTarget}get eventOptions(){return this.action.eventOptions}get identifier(){return this.context.identifier}handleEvent(e){this.willBeInvokedByEvent(e)&&this.applyEventModifiers(e)&&this.invokeWithEvent(e)}get eventName(){return this.action.eventName}get method(){let e=this.controller[this.methodName];if(typeof e=="function")return e;throw new Error(`Action "${this.action}" references undefined method "${this.methodName}"`)}applyEventModifiers(e){let{element:t}=this.action,{actionDescriptorFilters:n}=this.context.application,r=!0;for(let[i,o]of Object.entries(this.eventOptions))if(i in n){let a=n[i];r=r&&a({name:i,value:o,event:e,element:t})}else continue;return r}invokeWithEvent(e){let{target:t,currentTarget:n}=e;try{let{params:r}=this.action,i=Object.assign(e,{params:r});this.method.call(this.controller,i),this.context.logDebugActivity(this.methodName,{event:e,target:t,currentTarget:n,action:this.methodName})}catch(r){let{identifier:i,controller:o,element:a,index:l}=this,p={identifier:i,controller:o,element:a,index:l,event:e};this.context.handleError(r,`invoking action "${this.action}"`,p)}}willBeInvokedByEvent(e){let t=e.target;return e instanceof KeyboardEvent&&this.action.isFilterTarget(e)?!1:this.element===t?!0:t instanceof Element&&this.element.contains(t)?this.scope.containsElement(t):this.scope.containsElement(this.action.element)}get controller(){return this.context.controller}get methodName(){return this.action.methodName}get element(){return this.scope.element}get scope(){return this.context.scope}},be=class{constructor(e,t){this.mutationObserverInit={attributes:!0,childList:!0,subtree:!0},this.element=e,this.started=!1,this.delegate=t,this.elements=new Set,this.mutationObserver=new MutationObserver(n=>this.processMutations(n))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,this.mutationObserverInit),this.refresh())}pause(e){this.started&&(this.mutationObserver.disconnect(),this.started=!1),e(),this.started||(this.mutationObserver.observe(this.element,this.mutationObserverInit),this.started=!0)}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started){let e=new Set(this.matchElementsInTree());for(let t of Array.from(this.elements))e.has(t)||this.removeElement(t);for(let t of Array.from(e))this.addElement(t)}}processMutations(e){if(this.started)for(let t of e)this.processMutation(t)}processMutation(e){e.type=="attributes"?this.processAttributeChange(e.target,e.attributeName):e.type=="childList"&&(this.processRemovedNodes(e.removedNodes),this.processAddedNodes(e.addedNodes))}processAttributeChange(e,t){let n=e;this.elements.has(n)?this.delegate.elementAttributeChanged&&this.matchElement(n)?this.delegate.elementAttributeChanged(n,t):this.removeElement(n):this.matchElement(n)&&this.addElement(n)}processRemovedNodes(e){for(let t of Array.from(e)){let n=this.elementFromNode(t);n&&this.processTree(n,this.removeElement)}}processAddedNodes(e){for(let t of Array.from(e)){let n=this.elementFromNode(t);n&&this.elementIsActive(n)&&this.processTree(n,this.addElement)}}matchElement(e){return this.delegate.matchElement(e)}matchElementsInTree(e=this.element){return this.delegate.matchElementsInTree(e)}processTree(e,t){for(let n of this.matchElementsInTree(e))t.call(this,n)}elementFromNode(e){if(e.nodeType==Node.ELEMENT_NODE)return e}elementIsActive(e){return e.isConnected!=this.element.isConnected?!1:this.element.contains(e)}addElement(e){this.elements.has(e)||this.elementIsActive(e)&&(this.elements.add(e),this.delegate.elementMatched&&this.delegate.elementMatched(e))}removeElement(e){this.elements.has(e)&&(this.elements.delete(e),this.delegate.elementUnmatched&&this.delegate.elementUnmatched(e))}},Ie=class{constructor(e,t,n){this.attributeName=t,this.delegate=n,this.elementObserver=new be(e,this)}get element(){return this.elementObserver.element}get selector(){return`[${this.attributeName}]`}start(){this.elementObserver.start()}pause(e){this.elementObserver.pause(e)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get started(){return this.elementObserver.started}matchElement(e){return e.hasAttribute(this.attributeName)}matchElementsInTree(e){let t=this.matchElement(e)?[e]:[],n=Array.from(e.querySelectorAll(this.selector));return t.concat(n)}elementMatched(e){this.delegate.elementMatchedAttribute&&this.delegate.elementMatchedAttribute(e,this.attributeName)}elementUnmatched(e){this.delegate.elementUnmatchedAttribute&&this.delegate.elementUnmatchedAttribute(e,this.attributeName)}elementAttributeChanged(e,t){this.delegate.elementAttributeValueChanged&&this.attributeName==t&&this.delegate.elementAttributeValueChanged(e,t)}};function Vs(s,e,t){Bt(s,e).add(t)}function Ns(s,e,t){Bt(s,e).delete(t),Ds(s,e)}function Bt(s,e){let t=s.get(e);return t||(t=new Set,s.set(e,t)),t}function Ds(s,e){let t=s.get(e);t!=null&&t.size==0&&s.delete(e)}var D=class{constructor(){this.valuesByKey=new Map}get keys(){return Array.from(this.valuesByKey.keys())}get values(){return Array.from(this.valuesByKey.values()).reduce((t,n)=>t.concat(Array.from(n)),[])}get size(){return Array.from(this.valuesByKey.values()).reduce((t,n)=>t+n.size,0)}add(e,t){Vs(this.valuesByKey,e,t)}delete(e,t){Ns(this.valuesByKey,e,t)}has(e,t){let n=this.valuesByKey.get(e);return n!=null&&n.has(t)}hasKey(e){return this.valuesByKey.has(e)}hasValue(e){return Array.from(this.valuesByKey.values()).some(n=>n.has(e))}getValuesForKey(e){let t=this.valuesByKey.get(e);return t?Array.from(t):[]}getKeysForValue(e){return Array.from(this.valuesByKey).filter(([t,n])=>n.has(e)).map(([t,n])=>t)}};var Ke=class{constructor(e,t,n,r={}){this.selector=t,this.details=r,this.elementObserver=new be(e,this),this.delegate=n,this.matchesByElement=new D}get started(){return this.elementObserver.started}start(){this.elementObserver.start()}pause(e){this.elementObserver.pause(e)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get element(){return this.elementObserver.element}matchElement(e){let t=e.matches(this.selector);return this.delegate.selectorMatchElement?t&&this.delegate.selectorMatchElement(e,this.details):t}matchElementsInTree(e){let t=this.matchElement(e)?[e]:[],n=Array.from(e.querySelectorAll(this.selector)).filter(r=>this.matchElement(r));return t.concat(n)}elementMatched(e){this.selectorMatched(e)}elementUnmatched(e){this.selectorUnmatched(e)}elementAttributeChanged(e,t){let n=this.matchElement(e),r=this.matchesByElement.has(this.selector,e);!n&&r&&this.selectorUnmatched(e)}selectorMatched(e){this.delegate.selectorMatched&&(this.delegate.selectorMatched(e,this.selector,this.details),this.matchesByElement.add(this.selector,e))}selectorUnmatched(e){this.delegate.selectorUnmatched(e,this.selector,this.details),this.matchesByElement.delete(this.selector,e)}},We=class{constructor(e,t){this.element=e,this.delegate=t,this.started=!1,this.stringMap=new Map,this.mutationObserver=new MutationObserver(n=>this.processMutations(n))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,{attributes:!0,attributeOldValue:!0}),this.refresh())}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started)for(let e of this.knownAttributeNames)this.refreshAttribute(e,null)}processMutations(e){if(this.started)for(let t of e)this.processMutation(t)}processMutation(e){let t=e.attributeName;t&&this.refreshAttribute(t,e.oldValue)}refreshAttribute(e,t){let n=this.delegate.getStringMapKeyForAttribute(e);if(n!=null){this.stringMap.has(e)||this.stringMapKeyAdded(n,e);let r=this.element.getAttribute(e);if(this.stringMap.get(e)!=r&&this.stringMapValueChanged(r,n,t),r==null){let i=this.stringMap.get(e);this.stringMap.delete(e),i&&this.stringMapKeyRemoved(n,e,i)}else this.stringMap.set(e,r)}}stringMapKeyAdded(e,t){this.delegate.stringMapKeyAdded&&this.delegate.stringMapKeyAdded(e,t)}stringMapValueChanged(e,t,n){this.delegate.stringMapValueChanged&&this.delegate.stringMapValueChanged(e,t,n)}stringMapKeyRemoved(e,t,n){this.delegate.stringMapKeyRemoved&&this.delegate.stringMapKeyRemoved(e,t,n)}get knownAttributeNames(){return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)))}get currentAttributeNames(){return Array.from(this.element.attributes).map(e=>e.name)}get recordedAttributeNames(){return Array.from(this.stringMap.keys())}},we=class{constructor(e,t,n){this.attributeObserver=new Ie(e,t,this),this.delegate=n,this.tokensByElement=new D}get started(){return this.attributeObserver.started}start(){this.attributeObserver.start()}pause(e){this.attributeObserver.pause(e)}stop(){this.attributeObserver.stop()}refresh(){this.attributeObserver.refresh()}get element(){return this.attributeObserver.element}get attributeName(){return this.attributeObserver.attributeName}elementMatchedAttribute(e){this.tokensMatched(this.readTokensForElement(e))}elementAttributeValueChanged(e){let[t,n]=this.refreshTokensForElement(e);this.tokensUnmatched(t),this.tokensMatched(n)}elementUnmatchedAttribute(e){this.tokensUnmatched(this.tokensByElement.getValuesForKey(e))}tokensMatched(e){e.forEach(t=>this.tokenMatched(t))}tokensUnmatched(e){e.forEach(t=>this.tokenUnmatched(t))}tokenMatched(e){this.delegate.tokenMatched(e),this.tokensByElement.add(e.element,e)}tokenUnmatched(e){this.delegate.tokenUnmatched(e),this.tokensByElement.delete(e.element,e)}refreshTokensForElement(e){let t=this.tokensByElement.getValuesForKey(e),n=this.readTokensForElement(e),r=js(t,n).findIndex(([i,o])=>!Is(i,o));return r==-1?[[],[]]:[t.slice(r),n.slice(r)]}readTokensForElement(e){let t=this.attributeName,n=e.getAttribute(t)||"";return Ps(n,e,t)}};function Ps(s,e,t){return s.trim().split(/\s+/).filter(n=>n.length).map((n,r)=>({element:e,attributeName:t,content:n,index:r}))}function js(s,e){let t=Math.max(s.length,e.length);return Array.from({length:t},(n,r)=>[s[r],e[r]])}function Is(s,e){return s&&e&&s.index==e.index&&s.content==e.content}var Ee=class{constructor(e,t,n){this.tokenListObserver=new we(e,t,this),this.delegate=n,this.parseResultsByToken=new WeakMap,this.valuesByTokenByElement=new WeakMap}get started(){return this.tokenListObserver.started}start(){this.tokenListObserver.start()}stop(){this.tokenListObserver.stop()}refresh(){this.tokenListObserver.refresh()}get element(){return this.tokenListObserver.element}get attributeName(){return this.tokenListObserver.attributeName}tokenMatched(e){let{element:t}=e,{value:n}=this.fetchParseResultForToken(e);n&&(this.fetchValuesByTokenForElement(t).set(e,n),this.delegate.elementMatchedValue(t,n))}tokenUnmatched(e){let{element:t}=e,{value:n}=this.fetchParseResultForToken(e);n&&(this.fetchValuesByTokenForElement(t).delete(e),this.delegate.elementUnmatchedValue(t,n))}fetchParseResultForToken(e){let t=this.parseResultsByToken.get(e);return t||(t=this.parseToken(e),this.parseResultsByToken.set(e,t)),t}fetchValuesByTokenForElement(e){let t=this.valuesByTokenByElement.get(e);return t||(t=new Map,this.valuesByTokenByElement.set(e,t)),t}parseToken(e){try{return{value:this.delegate.parseValueForToken(e)}}catch(t){return{error:t}}}},Re=class{constructor(e,t){this.context=e,this.delegate=t,this.bindingsByAction=new Map}start(){this.valueListObserver||(this.valueListObserver=new Ee(this.element,this.actionAttribute,this),this.valueListObserver.start())}stop(){this.valueListObserver&&(this.valueListObserver.stop(),delete this.valueListObserver,this.disconnectAllActions())}get element(){return this.context.element}get identifier(){return this.context.identifier}get actionAttribute(){return this.schema.actionAttribute}get schema(){return this.context.schema}get bindings(){return Array.from(this.bindingsByAction.values())}connectAction(e){let t=new je(this.context,e);this.bindingsByAction.set(e,t),this.delegate.bindingConnected(t)}disconnectAction(e){let t=this.bindingsByAction.get(e);t&&(this.bindingsByAction.delete(e),this.delegate.bindingDisconnected(t))}disconnectAllActions(){this.bindings.forEach(e=>this.delegate.bindingDisconnected(e,!0)),this.bindingsByAction.clear()}parseValueForToken(e){let t=Pe.forToken(e,this.schema);if(t.identifier==this.identifier)return t}elementMatchedValue(e,t){this.connectAction(t)}elementUnmatchedValue(e,t){this.disconnectAction(t)}},qe=class{constructor(e,t){this.context=e,this.receiver=t,this.stringMapObserver=new We(this.element,this),this.valueDescriptorMap=this.controller.valueDescriptorMap}start(){this.stringMapObserver.start(),this.invokeChangedCallbacksForDefaultValues()}stop(){this.stringMapObserver.stop()}get element(){return this.context.element}get controller(){return this.context.controller}getStringMapKeyForAttribute(e){if(e in this.valueDescriptorMap)return this.valueDescriptorMap[e].name}stringMapKeyAdded(e,t){let n=this.valueDescriptorMap[t];this.hasValue(e)||this.invokeChangedCallback(e,n.writer(this.receiver[e]),n.writer(n.defaultValue))}stringMapValueChanged(e,t,n){let r=this.valueDescriptorNameMap[t];e!==null&&(n===null&&(n=r.writer(r.defaultValue)),this.invokeChangedCallback(t,e,n))}stringMapKeyRemoved(e,t,n){let r=this.valueDescriptorNameMap[e];this.hasValue(e)?this.invokeChangedCallback(e,r.writer(this.receiver[e]),n):this.invokeChangedCallback(e,r.writer(r.defaultValue),n)}invokeChangedCallbacksForDefaultValues(){for(let{key:e,name:t,defaultValue:n,writer:r}of this.valueDescriptors)n!=null&&!this.controller.data.has(e)&&this.invokeChangedCallback(t,r(n),void 0)}invokeChangedCallback(e,t,n){let r=`${e}Changed`,i=this.receiver[r];if(typeof i=="function"){let o=this.valueDescriptorNameMap[e];try{let a=o.reader(t),l=n;n&&(l=o.reader(n)),i.call(this.receiver,a,l)}catch(a){throw a instanceof TypeError&&(a.message=`Stimulus Value "${this.context.identifier}.${o.name}" - ${a.message}`),a}}}get valueDescriptors(){let{valueDescriptorMap:e}=this;return Object.keys(e).map(t=>e[t])}get valueDescriptorNameMap(){let e={};return Object.keys(this.valueDescriptorMap).forEach(t=>{let n=this.valueDescriptorMap[t];e[n.name]=n}),e}hasValue(e){let t=this.valueDescriptorNameMap[e],n=`has${le(t.name)}`;return this.receiver[n]}},ze=class{constructor(e,t){this.context=e,this.delegate=t,this.targetsByName=new D}start(){this.tokenListObserver||(this.tokenListObserver=new we(this.element,this.attributeName,this),this.tokenListObserver.start())}stop(){this.tokenListObserver&&(this.disconnectAllTargets(),this.tokenListObserver.stop(),delete this.tokenListObserver)}tokenMatched({element:e,content:t}){this.scope.containsElement(e)&&this.connectTarget(e,t)}tokenUnmatched({element:e,content:t}){this.disconnectTarget(e,t)}connectTarget(e,t){var n;this.targetsByName.has(t,e)||(this.targetsByName.add(t,e),(n=this.tokenListObserver)===null||n===void 0||n.pause(()=>this.delegate.targetConnected(e,t)))}disconnectTarget(e,t){var n;this.targetsByName.has(t,e)&&(this.targetsByName.delete(t,e),(n=this.tokenListObserver)===null||n===void 0||n.pause(()=>this.delegate.targetDisconnected(e,t)))}disconnectAllTargets(){for(let e of this.targetsByName.keys)for(let t of this.targetsByName.getValuesForKey(e))this.disconnectTarget(t,e)}get attributeName(){return`data-${this.context.identifier}-target`}get element(){return this.context.element}get scope(){return this.context.scope}};function ce(s,e){let t=Ft(s);return Array.from(t.reduce((n,r)=>(Ws(r,e).forEach(i=>n.add(i)),n),new Set))}function Ks(s,e){return Ft(s).reduce((n,r)=>(n.push(...Rs(r,e)),n),[])}function Ft(s){let e=[];for(;s;)e.push(s),s=Object.getPrototypeOf(s);return e.reverse()}function Ws(s,e){let t=s[e];return Array.isArray(t)?t:[]}function Rs(s,e){let t=s[e];return t?Object.keys(t).map(n=>[n,t[n]]):[]}var He=class{constructor(e,t){this.context=e,this.delegate=t,this.outletsByName=new D,this.outletElementsByName=new D,this.selectorObserverMap=new Map}start(){this.selectorObserverMap.size===0&&(this.outletDefinitions.forEach(e=>{let t=this.selector(e),n={outletName:e};t&&this.selectorObserverMap.set(e,new Ke(document.body,t,this,n))}),this.selectorObserverMap.forEach(e=>e.start())),this.dependentContexts.forEach(e=>e.refresh())}stop(){this.selectorObserverMap.size>0&&(this.disconnectAllOutlets(),this.selectorObserverMap.forEach(e=>e.stop()),this.selectorObserverMap.clear())}refresh(){this.selectorObserverMap.forEach(e=>e.refresh())}selectorMatched(e,t,{outletName:n}){let r=this.getOutlet(e,n);r&&this.connectOutlet(r,e,n)}selectorUnmatched(e,t,{outletName:n}){let r=this.getOutletFromMap(e,n);r&&this.disconnectOutlet(r,e,n)}selectorMatchElement(e,{outletName:t}){return this.hasOutlet(e,t)&&e.matches(`[${this.context.application.schema.controllerAttribute}~=${t}]`)}connectOutlet(e,t,n){var r;this.outletElementsByName.has(n,t)||(this.outletsByName.add(n,e),this.outletElementsByName.add(n,t),(r=this.selectorObserverMap.get(n))===null||r===void 0||r.pause(()=>this.delegate.outletConnected(e,t,n)))}disconnectOutlet(e,t,n){var r;this.outletElementsByName.has(n,t)&&(this.outletsByName.delete(n,e),this.outletElementsByName.delete(n,t),(r=this.selectorObserverMap.get(n))===null||r===void 0||r.pause(()=>this.delegate.outletDisconnected(e,t,n)))}disconnectAllOutlets(){for(let e of this.outletElementsByName.keys)for(let t of this.outletElementsByName.getValuesForKey(e))for(let n of this.outletsByName.getValuesForKey(e))this.disconnectOutlet(n,t,e)}selector(e){return this.scope.outlets.getSelectorForOutletName(e)}get outletDependencies(){let e=new D;return this.router.modules.forEach(t=>{let n=t.definition.controllerConstructor;ce(n,"outlets").forEach(i=>e.add(i,t.identifier))}),e}get outletDefinitions(){return this.outletDependencies.getKeysForValue(this.identifier)}get dependentControllerIdentifiers(){return this.outletDependencies.getValuesForKey(this.identifier)}get dependentContexts(){let e=this.dependentControllerIdentifiers;return this.router.contexts.filter(t=>e.includes(t.identifier))}hasOutlet(e,t){return!!this.getOutlet(e,t)||!!this.getOutletFromMap(e,t)}getOutlet(e,t){return this.application.getControllerForElementAndIdentifier(e,t)}getOutletFromMap(e,t){return this.outletsByName.getValuesForKey(t).find(n=>n.element===e)}get scope(){return this.context.scope}get identifier(){return this.context.identifier}get application(){return this.context.application}get router(){return this.application.router}},_e=class{constructor(e,t){this.logDebugActivity=(n,r={})=>{let{identifier:i,controller:o,element:a}=this;r=Object.assign({identifier:i,controller:o,element:a},r),this.application.logDebugActivity(this.identifier,n,r)},this.module=e,this.scope=t,this.controller=new e.controllerConstructor(this),this.bindingObserver=new Re(this,this.dispatcher),this.valueObserver=new qe(this,this.controller),this.targetObserver=new ze(this,this),this.outletObserver=new He(this,this);try{this.controller.initialize(),this.logDebugActivity("initialize")}catch(n){this.handleError(n,"initializing controller")}}connect(){this.bindingObserver.start(),this.valueObserver.start(),this.targetObserver.start(),this.outletObserver.start();try{this.controller.connect(),this.logDebugActivity("connect")}catch(e){this.handleError(e,"connecting controller")}}refresh(){this.outletObserver.refresh()}disconnect(){try{this.controller.disconnect(),this.logDebugActivity("disconnect")}catch(e){this.handleError(e,"disconnecting controller")}this.outletObserver.stop(),this.targetObserver.stop(),this.valueObserver.stop(),this.bindingObserver.stop()}get application(){return this.module.application}get identifier(){return this.module.identifier}get schema(){return this.application.schema}get dispatcher(){return this.application.dispatcher}get element(){return this.scope.element}get parentElement(){return this.element.parentElement}handleError(e,t,n={}){let{identifier:r,controller:i,element:o}=this;n=Object.assign({identifier:r,controller:i,element:o},n),this.application.handleError(e,`Error ${t}`,n)}targetConnected(e,t){this.invokeControllerMethod(`${t}TargetConnected`,e)}targetDisconnected(e,t){this.invokeControllerMethod(`${t}TargetDisconnected`,e)}outletConnected(e,t,n){this.invokeControllerMethod(`${De(n)}OutletConnected`,e,t)}outletDisconnected(e,t,n){this.invokeControllerMethod(`${De(n)}OutletDisconnected`,e,t)}invokeControllerMethod(e,...t){let n=this.controller;typeof n[e]=="function"&&n[e](...t)}};function qs(s){return zs(s,Hs(s))}function zs(s,e){let t=Ys(s),n=_s(s.prototype,e);return Object.defineProperties(t.prototype,n),t}function Hs(s){return ce(s,"blessings").reduce((t,n)=>{let r=n(s);for(let i in r){let o=t[i]||{};t[i]=Object.assign(o,r[i])}return t},{})}function _s(s,e){return Xs(e).reduce((t,n)=>{let r=Us(s,e,n);return r&&Object.assign(t,{[n]:r}),t},{})}function Us(s,e,t){let n=Object.getOwnPropertyDescriptor(s,t);if(!(n&&"value"in n)){let i=Object.getOwnPropertyDescriptor(e,t).value;return n&&(i.get=n.get||i.get,i.set=n.set||i.set),i}}var Xs=(()=>typeof Object.getOwnPropertySymbols=="function"?s=>[...Object.getOwnPropertyNames(s),...Object.getOwnPropertySymbols(s)]:Object.getOwnPropertyNames)(),Ys=(()=>{function s(t){function n(){return Reflect.construct(t,arguments,new.target)}return n.prototype=Object.create(t.prototype,{constructor:{value:n}}),Reflect.setPrototypeOf(n,t),n}function e(){let n=s(function(){this.a.call(this)});return n.prototype.a=function(){},new n}try{return e(),s}catch{return n=>class extends n{}}})();function Gs(s){return{identifier:s.identifier,controllerConstructor:qs(s.controllerConstructor)}}var Ue=class{constructor(e,t){this.application=e,this.definition=Gs(t),this.contextsByScope=new WeakMap,this.connectedContexts=new Set}get identifier(){return this.definition.identifier}get controllerConstructor(){return this.definition.controllerConstructor}get contexts(){return Array.from(this.connectedContexts)}connectContextForScope(e){let t=this.fetchContextForScope(e);this.connectedContexts.add(t),t.connect()}disconnectContextForScope(e){let t=this.contextsByScope.get(e);t&&(this.connectedContexts.delete(t),t.disconnect())}fetchContextForScope(e){let t=this.contextsByScope.get(e);return t||(t=new _e(this,e),this.contextsByScope.set(e,t)),t}},Xe=class{constructor(e){this.scope=e}has(e){return this.data.has(this.getDataKey(e))}get(e){return this.getAll(e)[0]}getAll(e){let t=this.data.get(this.getDataKey(e))||"";return Ls(t)}getAttributeName(e){return this.data.getAttributeNameForKey(this.getDataKey(e))}getDataKey(e){return`${e}-class`}get data(){return this.scope.data}},Ye=class{constructor(e){this.scope=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get(e){let t=this.getAttributeNameForKey(e);return this.element.getAttribute(t)}set(e,t){let n=this.getAttributeNameForKey(e);return this.element.setAttribute(n,t),this.get(e)}has(e){let t=this.getAttributeNameForKey(e);return this.element.hasAttribute(t)}delete(e){if(this.has(e)){let t=this.getAttributeNameForKey(e);return this.element.removeAttribute(t),!0}else return!1}getAttributeNameForKey(e){return`data-${this.identifier}-${Lt(e)}`}},Ge=class{constructor(e){this.warnedKeysByObject=new WeakMap,this.logger=e}warn(e,t,n){let r=this.warnedKeysByObject.get(e);r||(r=new Set,this.warnedKeysByObject.set(e,r)),r.has(t)||(r.add(t),this.logger.warn(n,e))}};function Je(s,e){return`[${s}~="${e}"]`}var Ze=class{constructor(e){this.scope=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(e){return this.find(e)!=null}find(...e){return e.reduce((t,n)=>t||this.findTarget(n)||this.findLegacyTarget(n),void 0)}findAll(...e){return e.reduce((t,n)=>[...t,...this.findAllTargets(n),...this.findAllLegacyTargets(n)],[])}findTarget(e){let t=this.getSelectorForTargetName(e);return this.scope.findElement(t)}findAllTargets(e){let t=this.getSelectorForTargetName(e);return this.scope.findAllElements(t)}getSelectorForTargetName(e){let t=this.schema.targetAttributeForScope(this.identifier);return Je(t,e)}findLegacyTarget(e){let t=this.getLegacySelectorForTargetName(e);return this.deprecate(this.scope.findElement(t),e)}findAllLegacyTargets(e){let t=this.getLegacySelectorForTargetName(e);return this.scope.findAllElements(t).map(n=>this.deprecate(n,e))}getLegacySelectorForTargetName(e){let t=`${this.identifier}.${e}`;return Je(this.schema.targetAttribute,t)}deprecate(e,t){if(e){let{identifier:n}=this,r=this.schema.targetAttribute,i=this.schema.targetAttributeForScope(n);this.guide.warn(e,`target:${t}`,`Please replace ${r}="${n}.${t}" with ${i}="${t}". The ${r} attribute is deprecated and will be removed in a future version of Stimulus.`)}return e}get guide(){return this.scope.guide}},Qe=class{constructor(e,t){this.scope=e,this.controllerElement=t}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(e){return this.find(e)!=null}find(...e){return e.reduce((t,n)=>t||this.findOutlet(n),void 0)}findAll(...e){return e.reduce((t,n)=>[...t,...this.findAllOutlets(n)],[])}getSelectorForOutletName(e){let t=this.schema.outletAttributeForScope(this.identifier,e);return this.controllerElement.getAttribute(t)}findOutlet(e){let t=this.getSelectorForOutletName(e);if(t)return this.findElement(t,e)}findAllOutlets(e){let t=this.getSelectorForOutletName(e);return t?this.findAllElements(t,e):[]}findElement(e,t){return this.scope.queryElements(e).filter(r=>this.matchesElement(r,e,t))[0]}findAllElements(e,t){return this.scope.queryElements(e).filter(r=>this.matchesElement(r,e,t))}matchesElement(e,t,n){let r=e.getAttribute(this.scope.schema.controllerAttribute)||"";return e.matches(t)&&r.split(" ").includes(n)}},oe=class{constructor(e,t,n,r){this.targets=new Ze(this),this.classes=new Xe(this),this.data=new Ye(this),this.containsElement=i=>i.closest(this.controllerSelector)===this.element,this.schema=e,this.element=t,this.identifier=n,this.guide=new Ge(r),this.outlets=new Qe(this.documentScope,t)}findElement(e){return this.element.matches(e)?this.element:this.queryElements(e).find(this.containsElement)}findAllElements(e){return[...this.element.matches(e)?[this.element]:[],...this.queryElements(e).filter(this.containsElement)]}queryElements(e){return Array.from(this.element.querySelectorAll(e))}get controllerSelector(){return Je(this.schema.controllerAttribute,this.identifier)}get isDocumentScope(){return this.element===document.documentElement}get documentScope(){return this.isDocumentScope?this:new oe(this.schema,document.documentElement,this.identifier,this.guide.logger)}},et=class{constructor(e,t,n){this.element=e,this.schema=t,this.delegate=n,this.valueListObserver=new Ee(this.element,this.controllerAttribute,this),this.scopesByIdentifierByElement=new WeakMap,this.scopeReferenceCounts=new WeakMap}start(){this.valueListObserver.start()}stop(){this.valueListObserver.stop()}get controllerAttribute(){return this.schema.controllerAttribute}parseValueForToken(e){let{element:t,content:n}=e,r=this.fetchScopesByIdentifierForElement(t),i=r.get(n);return i||(i=this.delegate.createScopeForElementAndIdentifier(t,n),r.set(n,i)),i}elementMatchedValue(e,t){let n=(this.scopeReferenceCounts.get(t)||0)+1;this.scopeReferenceCounts.set(t,n),n==1&&this.delegate.scopeConnected(t)}elementUnmatchedValue(e,t){let n=this.scopeReferenceCounts.get(t);n&&(this.scopeReferenceCounts.set(t,n-1),n==1&&this.delegate.scopeDisconnected(t))}fetchScopesByIdentifierForElement(e){let t=this.scopesByIdentifierByElement.get(e);return t||(t=new Map,this.scopesByIdentifierByElement.set(e,t)),t}},tt=class{constructor(e){this.application=e,this.scopeObserver=new et(this.element,this.schema,this),this.scopesByIdentifier=new D,this.modulesByIdentifier=new Map}get element(){return this.application.element}get schema(){return this.application.schema}get logger(){return this.application.logger}get controllerAttribute(){return this.schema.controllerAttribute}get modules(){return Array.from(this.modulesByIdentifier.values())}get contexts(){return this.modules.reduce((e,t)=>e.concat(t.contexts),[])}start(){this.scopeObserver.start()}stop(){this.scopeObserver.stop()}loadDefinition(e){this.unloadIdentifier(e.identifier);let t=new Ue(this.application,e);this.connectModule(t);let n=e.controllerConstructor.afterLoad;n&&n(e.identifier,this.application)}unloadIdentifier(e){let t=this.modulesByIdentifier.get(e);t&&this.disconnectModule(t)}getContextForElementAndIdentifier(e,t){let n=this.modulesByIdentifier.get(t);if(n)return n.contexts.find(r=>r.element==e)}handleError(e,t,n){this.application.handleError(e,t,n)}createScopeForElementAndIdentifier(e,t){return new oe(this.schema,e,t,this.logger)}scopeConnected(e){this.scopesByIdentifier.add(e.identifier,e);let t=this.modulesByIdentifier.get(e.identifier);t&&t.connectContextForScope(e)}scopeDisconnected(e){this.scopesByIdentifier.delete(e.identifier,e);let t=this.modulesByIdentifier.get(e.identifier);t&&t.disconnectContextForScope(e)}connectModule(e){this.modulesByIdentifier.set(e.identifier,e),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach(n=>e.connectContextForScope(n))}disconnectModule(e){this.modulesByIdentifier.delete(e.identifier),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach(n=>e.disconnectContextForScope(n))}},Js={controllerAttribute:"data-controller",actionAttribute:"data-action",targetAttribute:"data-target",targetAttributeForScope:s=>`data-${s}-target`,outletAttributeForScope:(s,e)=>`data-${s}-${e}-outlet`,keyMappings:Object.assign(Object.assign({enter:"Enter",tab:"Tab",esc:"Escape",space:" ",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",home:"Home",end:"End"},Mt("abcdefghijklmnopqrstuvwxyz".split("").map(s=>[s,s]))),Mt("0123456789".split("").map(s=>[s,s])))};function Mt(s){return s.reduce((e,[t,n])=>Object.assign(Object.assign({},e),{[t]:n}),{})}var ke=class{constructor(e=document.documentElement,t=Js){this.logger=console,this.debug=!1,this.logDebugActivity=(n,r,i={})=>{this.debug&&this.logFormattedMessage(n,r,i)},this.element=e,this.schema=t,this.dispatcher=new Ne(this),this.router=new tt(this),this.actionDescriptorFilters=Object.assign({},Os)}static start(e,t){let n=new this(e,t);return n.start(),n}async start(){await Zs(),this.logDebugActivity("application","starting"),this.dispatcher.start(),this.router.start(),this.logDebugActivity("application","start")}stop(){this.logDebugActivity("application","stopping"),this.dispatcher.stop(),this.router.stop(),this.logDebugActivity("application","stop")}register(e,t){this.load({identifier:e,controllerConstructor:t})}registerActionOption(e,t){this.actionDescriptorFilters[e]=t}load(e,...t){(Array.isArray(e)?e:[e,...t]).forEach(r=>{r.controllerConstructor.shouldLoad&&this.router.loadDefinition(r)})}unload(e,...t){(Array.isArray(e)?e:[e,...t]).forEach(r=>this.router.unloadIdentifier(r))}get controllers(){return this.router.contexts.map(e=>e.controller)}getControllerForElementAndIdentifier(e,t){let n=this.router.getContextForElementAndIdentifier(e,t);return n?n.controller:null}handleError(e,t,n){var r;this.logger.error(`%s

%o

%o`,t,e,n),(r=window.onerror)===null||r===void 0||r.call(window,t,"",0,0,e)}logFormattedMessage(e,t,n={}){n=Object.assign({application:this},n),this.logger.groupCollapsed(`${e} #${t}`),this.logger.log("details:",Object.assign({},n)),this.logger.groupEnd()}};function Zs(){return new Promise(s=>{document.readyState=="loading"?document.addEventListener("DOMContentLoaded",()=>s()):s()})}function Qs(s){return ce(s,"classes").reduce((t,n)=>Object.assign(t,en(n)),{})}function en(s){return{[`${s}Class`]:{get(){let{classes:e}=this;if(e.has(s))return e.get(s);{let t=e.getAttributeName(s);throw new Error(`Missing attribute "${t}"`)}}},[`${s}Classes`]:{get(){return this.classes.getAll(s)}},[`has${le(s)}Class`]:{get(){return this.classes.has(s)}}}}function tn(s){return ce(s,"outlets").reduce((t,n)=>Object.assign(t,sn(n)),{})}function sn(s){let e=De(s);return{[`${e}Outlet`]:{get(){let t=this.outlets.find(s);if(t){let n=this.application.getControllerForElementAndIdentifier(t,s);if(n)return n;throw new Error(`Missing "data-controller=${s}" attribute on outlet element for "${this.identifier}" controller`)}throw new Error(`Missing outlet element "${s}" for "${this.identifier}" controller`)}},[`${e}Outlets`]:{get(){let t=this.outlets.findAll(s);return t.length>0?t.map(n=>{let r=this.application.getControllerForElementAndIdentifier(n,s);if(r)return r;console.warn(`The provided outlet element is missing the outlet controller "${s}" for "${this.identifier}"`,n)}).filter(n=>n):[]}},[`${e}OutletElement`]:{get(){let t=this.outlets.find(s);if(t)return t;throw new Error(`Missing outlet element "${s}" for "${this.identifier}" controller`)}},[`${e}OutletElements`]:{get(){return this.outlets.findAll(s)}},[`has${le(e)}Outlet`]:{get(){return this.outlets.has(s)}}}}function nn(s){return ce(s,"targets").reduce((t,n)=>Object.assign(t,rn(n)),{})}function rn(s){return{[`${s}Target`]:{get(){let e=this.targets.find(s);if(e)return e;throw new Error(`Missing target element "${s}" for "${this.identifier}" controller`)}},[`${s}Targets`]:{get(){return this.targets.findAll(s)}},[`has${le(s)}Target`]:{get(){return this.targets.has(s)}}}}function on(s){let e=Ks(s,"values"),t={valueDescriptorMap:{get(){return e.reduce((n,r)=>{let i=Vt(r,this.identifier),o=this.data.getAttributeNameForKey(i.key);return Object.assign(n,{[o]:i})},{})}}};return e.reduce((n,r)=>Object.assign(n,an(r)),t)}function an(s,e){let t=Vt(s,e),{key:n,name:r,reader:i,writer:o}=t;return{[r]:{get(){let a=this.data.get(n);return a!==null?i(a):t.defaultValue},set(a){a===void 0?this.data.delete(n):this.data.set(n,o(a))}},[`has${le(r)}`]:{get(){return this.data.has(n)||t.hasCustomDefaultValue}}}}function Vt([s,e],t){return hn({controller:t,token:s,typeDefinition:e})}function nt(s){switch(s){case Array:return"array";case Boolean:return"boolean";case Number:return"number";case Object:return"object";case String:return"string"}}function ae(s){switch(typeof s){case"boolean":return"boolean";case"number":return"number";case"string":return"string"}if(Array.isArray(s))return"array";if(Object.prototype.toString.call(s)==="[object Object]")return"object"}function ln(s){let e=nt(s.typeObject.type);if(!e)return;let t=ae(s.typeObject.default);if(e!==t){let n=s.controller?`${s.controller}.${s.token}`:s.token;throw new Error(`The specified default value for the Stimulus Value "${n}" must match the defined type "${e}". The provided default value of "${s.typeObject.default}" is of type "${t}".`)}return e}function cn(s){let e=ln({controller:s.controller,token:s.token,typeObject:s.typeDefinition}),t=ae(s.typeDefinition),n=nt(s.typeDefinition),r=e||t||n;if(r)return r;let i=s.controller?`${s.controller}.${s.typeDefinition}`:s.token;throw new Error(`Unknown value type "${i}" for "${s.token}" value`)}function un(s){let e=nt(s);if(e)return dn[e];let t=s.default;return t!==void 0?t:s}function hn(s){let e=`${Lt(s.token)}-value`,t=cn(s);return{type:t,key:e,name:st(e),get defaultValue(){return un(s.typeDefinition)},get hasCustomDefaultValue(){return ae(s.typeDefinition)!==void 0},reader:fn[t],writer:$t[t]||$t.default}}var dn={get array(){return[]},boolean:!1,number:0,get object(){return{}},string:""},fn={array(s){let e=JSON.parse(s);if(!Array.isArray(e))throw new TypeError(`expected value of type "array" but instead got value "${s}" of type "${ae(e)}"`);return e},boolean(s){return!(s=="0"||String(s).toLowerCase()=="false")},number(s){return Number(s)},object(s){let e=JSON.parse(s);if(e===null||typeof e!="object"||Array.isArray(e))throw new TypeError(`expected value of type "object" but instead got value "${s}" of type "${ae(e)}"`);return e},string(s){return s}},$t={default:pn,array:Tt,object:Tt};function Tt(s){return JSON.stringify(s)}function pn(s){return`${s}`}var M=class{constructor(e){this.context=e}static get shouldLoad(){return!0}static afterLoad(e,t){}get application(){return this.context.application}get scope(){return this.context.scope}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get targets(){return this.scope.targets}get outlets(){return this.scope.outlets}get classes(){return this.scope.classes}get data(){return this.scope.data}initialize(){}connect(){}disconnect(){}dispatch(e,{target:t=this.element,detail:n={},prefix:r=this.identifier,bubbles:i=!0,cancelable:o=!0}={}){let a=r?`${r}:${e}`:e,l=new CustomEvent(a,{detail:n,bubbles:i,cancelable:o});return t.dispatchEvent(l),l}};M.blessings=[Qs,nn,on,tn];M.targets=[];M.outlets=[];M.values={};function mn(s){return{on:(e,t)=>{s[e]||(s[e]=[]),s[e].push(t)},off:(e,t)=>{let n=[],r=s[e];if(r&&t){let i=0,o=r.length;for(;i<o;i++)r[i]!==t&&n.push(r[i])}n.length?r[e]=n:delete r[e]},emit:(e,t,n)=>{let r=s[e]||[],i=r.length,o=null;for(let a=0;a<i;a++){let l=r[a].apply(t,[n]);o===null&&l===!1&&(o=!0)}return o}}}function gn(s,e){let{config:t}=s,{classes:n}=t;return r=>{let i=a=>{if(typeof a!="number")return s.active!==r.index&&(s.active=r.index),r;if(s.folds[a])return s.active=r.index,s.folds[a];throw new TypeError(`No fold exists at index: ${a}`)},o=a=>{a.button.ariaDisabled="false",a.button.ariaExpanded="false",a.button.classList.remove(n.opened),a.content.classList.remove(n.expanded),a.expanded=!1,a.content.style.maxHeight="0"};r.open=a=>{let l=i(a);l.expanded||(l.close(),l.button.ariaDisabled="true",l.button.ariaExpanded="true",l.button.classList.add(n.opened),l.content.classList.add(n.expanded),l.content.style.maxHeight=`${l.content.scrollHeight}px`,l.expanded=!0,l.disable(),s.count=s.folds.filter(({expanded:p})=>p).length,e.emit("expand",s,l))},r.close=a=>{let l=i(a);if(t.multiple)(!t.persist||t.persist&&s.count>1)&&o(l);else for(let p of s.folds)if(p.expanded){if(t.persist&&p.index===l.index)break;o(p),l=p;break}l.enable(),s.count=s.folds.filter(({expanded:p})=>p).length,e.emit("collapse",s,l)},r.focus=()=>{s.active=r.index,r.button.classList.add(n.focused),e.emit("focus",s,r)},r.blur=()=>r.button.classList.remove(n.focused),r.enable=a=>{let l=i(a);l.disabled&&(l.disabled=!1,l.button.ariaDisabled="false",l.button.classList.remove(n.disabled))},r.disable=a=>{let l=i(a);l.disabled||(l.expanded?t.persist&&(l.disabled=!0,l.button.ariaDisabled="true"):(l.close(),l.disabled=!0,l.button.ariaDisabled="true",l.button.classList.add(n.disabled)))},r.toggle=()=>{if(!e.emit("toggle",s,r))return r.expanded?r.close():r.open()},r.destroy=(a=!1)=>{r.close(),r.button.removeEventListener("click",r.toggle),r.button.removeEventListener("focus",r.focus),r.button.removeEventListener("blur",r.blur),a&&(s.element.removeChild(r.content),s.element.removeChild(r.button))},r.button.addEventListener("click",r.toggle),r.button.addEventListener("focus",r.focus),r.button.addEventListener("blur",r.blur),s.folds.push(r)}}var yn=s=>{let e=s.trim();if(!/true|false/.test(e))throw new TypeError(`Invalid value. Boolean expected, received: ${e}`);return e==="true"},vn=(s,e)=>{let t=Object.create(null);if(t.classes=Object.create(null),t.persist=!0,t.multiple=!1,t.schema="data-relapse",t.classes.initial="initial",t.classes.opened="opened",t.classes.disabled="disabled",t.classes.expanded="expanded",t.classes.focused="focused",typeof s=="object")for(let i in s)if(i==="classes")for(let o in s[i])t.classes[o]=s[i][o];else t[i]=s[i];let n=/^(?:persist|multiple)$/,r=t.schema===null?5:t.schema.length+1;for(let{nodeName:i,nodeValue:o}of e){let a=i.slice(r);n.test(a)&&(t[a]=yn(o))}return t},Nt=function s(e,t){let n;if(typeof e=="string")if(e.charCodeAt(0)===35)n=document.body.querySelector(e);else for(let h of document.body.querySelectorAll(e))s(h,t);else if(e instanceof NodeList)for(let h of e)s(h,t);else e instanceof Element&&(n=e);if(!n)return;window.relapse instanceof Map||(window.relapse=new Map);let r=Object.create(null);r.events={},r.folds=[],r.element=n,r.id=`A${window.relapse.size}`,r.count=0,r.config=vn(t,r.element.attributes);let i;r.element.hasAttribute("data-relapse")?i=r.element.getAttribute("data-relapse"):(i=Math.random().toString(36).slice(2),r.element.setAttribute("data-relapse",i));let o=r.element.getAttribute("id");if(i===null&&o===null)i=r.id;else if(i!==null&&o!==null){if(window.relapse.has(o)||window.relapse.has(i))throw new TypeError(`An existing instance is using id "${i}"`)}else i===null&&o!==null&&(i=o);if(window.relapse.has(i))throw new TypeError(`An existing instance is using id "${i}"`);r.element.ariaMultiSelectable=`${r.config.multiple}`;let a=r.element.children,l=a.length,p=mn(r.events),S=gn(r,p),{classes:g}=r.config;for(let h=0;h<l;h=h+2){let u=a[h],v=a[h+1],d=Object.create(null);d.index=r.folds.length;let N=u.classList.contains(g.initial),J=u.classList.contains(g.opened),ne=u.classList.contains(g.disabled),me=v.classList.contains(g.expanded);u.ariaExpanded==="true"||J||me||N?(J?u.ariaExpanded="true":u.classList.add(g.opened),me||v.classList.add(g.expanded),ne||u.classList.add(g.disabled),N||u.classList.remove(g.initial),u.ariaDisabled="true",d.expanded=!0,d.disabled=!0):u.ariaDisabled==="true"||ne?(ne?u.ariaDisabled="false":u.classList.add(g.disabled),v.classList.remove(g.expanded),u.classList.remove(g.opened),u.ariaExpanded="false",d.expanded=!1,d.disabled=!0):(d.expanded=!1,d.disabled=!1,u.ariaExpanded="false",u.ariaDisabled="false"),u.id&&(d.id=u.id),v.id&&(d.id=v.id),"id"in d||(d.id=`${r.id}F${d.index}`,u.id=`B${d.id}`,v.id=`C${d.id}`),u.setAttribute("aria-controls",d.id),v.setAttribute("aria-labelledby",u.id),v.setAttribute("role","region"),d.button=u,d.content=v,d.expanded&&(r.count=r.count+1,d.content.style.maxHeight=`${d.content.scrollHeight}px`),S(d)}let k=(h,u,v=!1)=>{if(typeof u=="number")return h.charCodeAt(0)===100?r.folds[u][h](v):r.folds[u][h]();if(typeof u=="string"){for(let d of r.folds)if(d.button.dataset[`${r.config.schema}-fold`]===u)return h.charCodeAt(0)===100?d[h](v):d[h]()}throw new TypeError(`Fold does not exist: "${u}"`)};return r.on=p.on,r.off=p.off,r.collapse=h=>k("close",h),r.expand=h=>k("open",h),r.destroy=(h,u=!1)=>{if(typeof h>"u")for(let v of r.folds)v.destroy();else k("destroy",h,u);r.element.removeAttribute("aria-multiselectable"),p.emit("destroy",r),window.relapse.delete(i)},window.relapse.set(i,r),r};Nt.get=s=>s?window.relapse.get(s):window.relapse;var Dt=Nt;var b=(s,e,t)=>new Promise((n,r)=>{var i=l=>{try{a(t.next(l))}catch(p){r(p)}},o=l=>{try{a(t.throw(l))}catch(p){r(p)}},a=l=>l.done?n(l.value):Promise.resolve(l.value).then(i,o);a((t=t.apply(s,e)).next())}),A=typeof window<"u"?window:{screen:{},navigator:{}},te=(A.matchMedia||function(){return{matches:!1}}).bind(A),bn=!1,wn={get passive(){return bn=!0}},Ut=function(){};A.addEventListener&&A.addEventListener("p",Ut,wn);A.removeEventListener&&A.removeEventListener("p",Ut,!1);var lt="PointerEvent"in A,ct="ontouchstart"in A,En="TouchEvent"in A,kn=ct||En&&te("(any-pointer: coarse)").matches,Pt=(A.navigator.maxTouchPoints||0)>0||kn,Xt=A.navigator.userAgent||"",xn=te("(pointer: coarse)").matches&&/iPad|Macintosh/.test(Xt)&&Math.min(A.screen.width||0,A.screen.height||0)>=768,An=(te("(pointer: coarse)").matches||!te("(pointer: fine)").matches&&ct)&&!/Windows.*Firefox/.test(Xt),On=te("(any-pointer: fine)").matches||te("(any-hover: hover)").matches||xn||!ct,Ae=Pt&&(On||!An)?"hybrid":Pt?"touchOnly":"mouseOnly",W=lt?"pointer":"mouse",F=window.history,Se=window.location.origin,B=Object.assign,E=Object.create,ut=Array.isArray,de=Array.from,I="",Cn=()=>({selectors:{},targets:["body"],timeout:3e4,schema:"spx",cache:!0,limit:100,preload:null,async:!0,annotate:!1,hover:{trigger:"attribute",threshold:250},intersect:{rootMargin:"0px 0px 0px 0px",threshold:0},proximity:{distance:75,threshold:250,throttle:500},progress:{background:"#111",height:"3px",minimum:.09,easing:"linear",speed:300,trickle:!0,threshold:500,trickleSpeed:300}}),c=Cn(),y=E(null),P=E(null),f=E(null),$=E(null),jt=new Set;function q(s=E(null)){return s.x=window.scrollX,s.y=window.scrollY,s}function Sn(s){let e=document.createElement("textarea");return e.innerHTML=s,e.value}function w(s,e){if(s===1)console.info("SPX: "+e);else if(s===2)console.warn("SPX: "+e);else{console.error("SPX: "+e);try{throw s===3?new TypeError(e):new Error(e)}catch{}}}function m(s,e){return e in s}function Mn(){return Math.random().toString(36).slice(2)}function $n(s=2){return(e,t)=>{let n=e.length;return(n<1||e[n-1].length===s?e.push([t]):e[n-1].push(t))&&e}}function It(s){return s<1024?s+" B":s<1048576?(s/1024).toFixed(1)+" KB":s<1073741824?(s/1048576).toFixed(1)+" MB":(s/1073741824).toFixed(1)+" GB"}function R(s,e){if(arguments.length===1)return n=>R(s,n);let t=e.length;if(t!==0)for(let n=0;n<t;n++)s(e[n],n,e)}function Kt(s){for(let e in s)delete s[e]}var Yt=(s={})=>{m(s,"hover")&&(s.hover===!1?c.hover=!1:typeof s.hover=="object"&&B(c.hover,s.hover),delete s.hover),m(s,"intersect")&&(s.intersect===!1?c.intersect=!1:typeof s.intersect=="object"&&B(c.intersect,s.intersect),delete s.intersect),m(s,"proximity")&&(s.proximity===!1?c.proximity=!1:typeof s.proximity=="object"&&B(c.proximity,s.proximity),delete s.proximity),m(s,"progress")&&(s.progress===!1?c.progress=!1:typeof s.progress=="object"&&B(c.progress,s.progress),delete s.progress),B(c,s);let e=c.schema===null,t=e?"data":`data-${c.schema}`,n=`:not([${t}-disable]):not([href^="#"])`;c.selectors.hrefs=c.annotate?e?`a[data-spx]${n}`:`a[${t}]${n}`:`a${n}`,c.selectors.tracking=`[${t}-track]:not([${t}-track=false])`,c.selectors.scripts=`script[${t}-eval]:not([${t}-eval=false])`,c.selectors.styles=`style[${t}-eval]:not([${t}-eval=false])`,c.selectors.attributes=new RegExp("^href|"+t+"-(hydrate|append|prepend|target|progress|threshold|position|proximity|hover)$","i"),c.selectors.proximity=`a[${t}-proximity]${n}${r("proximity")}`,c.selectors.intersector=`[${t}-intersect]${r("intersect")}`,c.selectors.intersects=`a${n}${r("intersect")}`,c.selectors.hover=c.hover.trigger==="href"?`a${n}${r("hover")}`:`a[${t}-hover]${n}${r("hover")}`,P.bytes=0,P.visits=0,P.limit=c.limit;function r(i){let o=`:not([${t}-${i}=false])`;if(i.charCodeAt(0)===104)return`${o}:not([${t}-proximity]):not([${t}-intersect])`;if(i.charCodeAt(0)===105)return`${o}:not([${t}-hover]):not([${t}-proximity])`;if(i.charCodeAt(0)===112)return`${o}:not([${t}-intersect]):not([${t}-hover])`}},Tn=/(?:https?:)?\/\/(?:www\.)?/,Ln=/\b(?:append|prepend)/,Bn=/^(?:application|text)\/(?:x-)?(?:ecma|java)script|text\/javascript$/,Fn=/^\b(?:true|false)$/i,ht=/^[+-]?\d*\.?\d+$/,Vn=/\s+/g,Nn=/\b(?:intersect|hover|proximity)\b/,Wt=/\[?[^,'"[\]()\s]+\]?/g,Dn=/\(?\[(['"]?.*['"]?,?)\]\)?/,Pn=/[xy]:[0-9.]+/,jn=/[xy]|\d*\.?\d+/g,x=Se.replace(Tn,I);function In(s){let e=E(null);return R((t,n,r)=>{let i=r.length-1>=n?n-1:n;n%2&&(e[r[i]]=ht.test(t)?Number(t):t)},s),e}function Gt(s,e){let t=e||E(null);for(let{nodeName:n,nodeValue:r}of s.attributes)if(c.selectors.attributes.test(n))if(n==="href")t.rev=location.pathname+location.search,e||(t.location=Jt(r),t.key=t.location.pathname+t.location.search);else{let i=n.slice(1+n.lastIndexOf("-")),o=r.replace(Vn,I);Dn.test(o)?t[i]=Ln.test(i)?o.match(Wt).reduce($n(2),[]):o.match(Wt):Pn.test(o)?t[i]=In(o.match(jn)):Fn.test(o)?Nn.test(n)||(t[i]=o==="true"):ht.test(o)?t[i]=Number(o):t[i]=o}return t}function Z(s){let e=E(null);if(s.length===1&&s.charCodeAt(0)===47)return e.pathname=s,e.hash=I,e.search=I,e;let t=s.indexOf("#");t>=0?(e.hash=s.slice(t),s=s.slice(0,t)):e.hash=I;let n=s.indexOf("?");return n>=0?(e.search=s.slice(n),s=s.slice(0,n)):e.search=I,e.pathname=s,e}function xe(s,e){let t=s.indexOf("/",e);if(t>e){let r=s.indexOf("#",t);return r<0?s.slice(t):s.slice(t,r)}let n=s.indexOf("?",e);if(n>e){let r=s.indexOf("#",n);return r<0?s.slice(n):s.slice(n,r)}return s.length-e===x.length?"/":null}function rt(s){let e=s.startsWith("www.")?s.slice(4):s,t=e.indexOf("/");if(t>=0){let n=e.slice(t);if(e.slice(0,t)===x)return n.length>0?Z(n):Z("/")}else{let n=e.search(/[?#]/);if(n>=0){if(e.slice(0,n)===x)return Z("/"+e.slice(n))}else if(e===x)return Z("/")}return null}function Kn(s){return s.startsWith("http")?1:s.startsWith("//")?2:s.startsWith("www.")?3:0}function Wn(s){if(typeof s!="string"||s.length===0)return!1;if(s.charCodeAt(0)===47)return s.charCodeAt(1)!==47?!0:s.startsWith("www.",2)?s.startsWith(x,6):s.startsWith(x,2);if(s.charCodeAt(0)===63)return!0;if(s.startsWith("www."))return s.startsWith(x,4);if(s.startsWith("http")){let e=s.indexOf("/",4)+2;return s.startsWith("www.",e)?s.startsWith(x,e+4):s.startsWith(x,e)}}function Rn(s){return s.charCodeAt(0)===47?s.charCodeAt(1)!==47?Z(s):rt(s.slice(2)):s.charCodeAt(0)===63?Z(location.pathname+s):s.startsWith("https:")||s.startsWith("http:")?rt(s.slice(s.indexOf("/",4)+2)):s.startsWith("www.")?rt(s):null}function se(s){if(typeof s=="object")return s.pathname+s.search;if(s===I)return"/";let e=Kn(s);if(e===1){let t=s.charCodeAt(4)===115?8:7,n=s.startsWith("www.",t)?t+4:t;return s.startsWith(x,n)?xe(s,n):null}if(e===2){let t=s.startsWith("www.",2)?6:2;return s.startsWith(x,t)?xe(s,t):null}return e===3?s.startsWith(x,4)?xe(s,4):null:s.startsWith(x,0)?xe(s,0):null}function qn(){return{hostname:x,origin:Se,pathname:location.pathname,search:location.search,hash:location.hash}}function Jt(s){if(s===I)return qn();let e=Rn(s);return e.origin=Se,e.hostname=x,e}function O(s,e){if(s instanceof Element){let n=Gt(s);return n.type=e||7,n}let t=E(null);return t.rev=location.pathname+location.search,t.location=Jt(typeof s=="string"?s:t.rev),t.key=se(t.location),t.type=e||7,t}function Me(s){return new DOMParser().parseFromString(s,"text/html")}function Zt(s){let e=s.indexOf(">",s.indexOf("<title"))+1,t=s.indexOf("</title",e);return Sn(s.slice(e,t))}var z=E(null);function V(s,...e){let t=s==="store";t&&e.splice(-1,1,Me(e[e.length-1]));let n=!0;return R(r=>{let i=r.apply(null,e);t?i instanceof Document?n=i.documentElement.outerHTML:typeof n!="string"&&(n=i!==!1):n=i!==!1},z[s]||[]),n}function dt(s,e){m(z,s)||(z[s]=[]),z[s].push(e)}function zn(s,e){let t=z[s],n=[];if(t&&e){let r=0,i=t.length;for(;r<i;r++)t[r]!==e&&n.push(t[r])}return n.length?z[s]=n:delete z[s],this}function Hn(s=[]){let e=ut(s)?s:[s];for(let t in f){let n=e.indexOf(t);n>=0&&(delete $[f[t].uuid],delete f[t],e.splice(n,1))}}function Oe(s){s?typeof s=="string"?(delete $[f[s].uuid],delete f[s]):ut(s)&&R(e=>{delete f[e],delete $[f[e].uuid]},s):(Kt(f),Kt($))}function C(s){return s.target=m(s,"target")?s.target.length===1&&s.target[0]==="body"?s.target:[].concat(c.targets,s.target):c.targets,c.cache&&(m(s,"cache")||(s.cache=c.cache),m(s,"uuid")||(s.uuid=Mn())),m(s,"position")||(s.position=E(null),s.position.y=0,s.position.x=0),c.hover!==!1&&s.type===11&&(m(s,"threshold")||(s.threshold=c.hover.threshold)),c.proximity!==!1&&s.type===13&&(m(s,"proximity")||(s.proximity=c.proximity.distance),m(s,"threshold")||(s.threshold=c.proximity.threshold)),c.progress!==!1&&!m(s,"progress")&&(s.progress=c.progress.threshold),m(s,"visits")||(s.visits=0),f[s.key]=s,f[s.key]}function Qt(s,e){let t=V("store",s,e),n=typeof t=="string"?t:e;return s.type>6&&(s.type>10?s.type=2:m(f,s.rev)&&(f[s.rev].position.x=window.scrollX,f[s.rev].position.y=window.scrollY)),s.title=Zt(n),!c.cache||t===!1?s:m(s,"uuid")?(f[s.key]=s,$[s.uuid]=n,V("cached",s),s):U(s,n)}function U(s,e){let t=m(f,s.key)?f[s.key]:C(s);return typeof e=="string"&&($[s.uuid]=e,s.title=Zt(e),s.position=q()),B(t,s)}function Rt(s=F.state.key){if(m(f,s)){let e=E(null);return e.page=f[s],e.dom=Me($[e.page.uuid]),e}w(4,`No record exists: ${s}`)}function L(s){return m(f,s)&&m(f[s],"uuid")&&m($,f[s].uuid)&&typeof $[f[s].uuid]=="string"}function ft(s,e){if(!(s instanceof Element))return!1;let t=s.closest(e);return t&&t.tagName==="A"?t:!1}function ot(s){if(s.nodeName!=="A")return!1;let e=s.href;return Wn(e)?!L(se(e)):!1}function _n(s,e){return de(document.body.querySelectorAll(s)).flatMap(t=>t.nodeName!=="A"?de(t.querySelectorAll(e)).filter(ot):ot(t)?t:[])}var pt=s=>de(document.body.querySelectorAll(s)).filter(ot),Ce=E(null),Q=E(null),Un=class extends XMLHttpRequest{constructor(){super(...arguments),this.key=null}},H=new Map;function mt(s){return new Promise(function(e,t){let n=new Un;n.key=s,n.open("GET",s),n.setRequestHeader("X-SPX","true"),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.onload=function(){e(this.responseText)},n.onerror=function(){t(this.statusText)},n.onabort=function(){H.delete(this.key)},n.onloadend=function(r){P.bytes=P.bytes+r.loaded,P.visits=P.visits+1,H.delete(this.key)},n.send(),H.set(s,n)})}function es(s,e,t){m(Q,s)||L(s)||(Q[s]=setTimeout(e,t))}function ts(s){return m(Q,s)?(clearTimeout(Q[s]),delete Q[s]):!0}function qt(s){return H.forEach((e,t)=>{s!==t&&(e.abort(),w(2,`Pending request aborted: ${t}`))})}function Xn(s){if(c.preload!==null){if(ut(c.preload)){let e=c.preload.filter(t=>{let n=O(t,4);return n.key!==t?T(C(n)):!1});return Promise.allSettled(e)}else if(typeof c.preload=="object"&&m(c.preload,s.key)){let e=c.preload[s.key].map(t=>T(C(O(t,4))));return Promise.allSettled(e)}}}function gt(s){return b(this,null,function*(){if(L(s)){f[s].position=q();return}let e=O(s,5),t=C(e);setTimeout(()=>T(t))})}function ss(s){return b(this,null,function*(){if(!m(Ce,s.key))return s;let e=yield Ce[s.key];return Qt(s,e)})}function T(s){return b(this,null,function*(){return H.has(s.key)?(s.type===5&&H.has(s.rev)?(H.get(s.rev).abort(),w(2,`Request aborted: ${s.rev}`)):w(2,`Request in transit: ${s.key}`),!1):V("fetch",s)?(Ce[s.key]=mt(s.key),ss(s)):(w(2,`Request cancelled via dispatched event: ${s.key}`),!1)})}function ns(s){let e=ft(s.target,c.selectors.hover);if(!e)return;let t=O(e,11);if(m(Q,t.key)||L(t.key))return;e.addEventListener(`${W}leave`,rs,{once:!0});let n=C(t),r=n.threshold||c.hover.threshold;es(t.key,function(){return b(this,null,function*(){V("prefetch",e,t)&&(yield T(n))&&is(e)})},r)}function rs(s){let e=ft(s.target,c.selectors.hover);e&&ts(se(e.href))}function Yn(s){s.addEventListener(`${W}enter`,ns)}function is(s){s.removeEventListener(`${W}enter`,ns),s.removeEventListener(`${W}leave`,rs)}function os(){!c.hover||y.hover||(R(Yn,pt(c.selectors.hover)),y.hover=!0)}function yt(){!y.hover||(R(is,pt(c.selectors.hover)),y.hover=!1)}function Gn({clientX:s,clientY:e},t){return s<=t.right&&s>=t.left&&e<=t.bottom&&e>=t.top}function Jn(s){let e=E(null),t=s.getBoundingClientRect(),n=s.getAttribute(c.selectors.proximity),r=ht.test(n)?Number(n):c.proximity.distance;return e.target=s,e.top=t.top-r,e.bottom=t.bottom+r,e.left=t.left-r,e.right=t.right+r,e}function Zn(s){let e=!1;return console.log(s),function(t){if(e)return;e=!0;let n=s.findIndex(r=>Gn(t,r));if(n===-1)setTimeout(()=>e=!1,c.proximity.throttle);else{let{target:r}=s[n];console.log(s);let i=C(O(r,13)),o=i.threshold||c.proximity.threshold;es(i.key,()=>b(this,null,function*(){if(!V("prefetch",r,i))return fe();(yield T(i))&&(s.splice(n,1),e=!1,s.length===0&&(fe(),w(1,"Proximity observer disconnected")))}),o)}}}var ue;function as(){if(!c.proximity||y.proximity)return;let s=pt(c.selectors.proximity).map(Jn);s.length>0&&(ue=Zn(s),lt?addEventListener("pointermove",ue,{passive:!0}):addEventListener("mousemove",ue,{passive:!0}),y.proximity=!0)}function fe(){!y.proximity||(lt?removeEventListener("pointermove",ue):removeEventListener("mousemove",ue),y.proximity=!1)}var _;function Qn(s){return b(this,null,function*(){if(s.isIntersecting){let e=O(s.target,12);if(!V("prefetch",s.target,e))return _.unobserve(s.target);(yield T(C(e)))?_.unobserve(s.target):(w(2,`Prefetch will retry at next intersect for: ${e.key}`),_.observe(s.target))}})}function ls(){if(!c.intersect||y.intersect)return;_||(_=new IntersectionObserver(R(Qn),c.intersect));let s=R(t=>_.observe(t)),e=_n(c.selectors.intersector,c.selectors.intersects);s(e),y.intersect=!0}function vt(){!y.intersect||(_.disconnect(),y.intersect=!1)}var X=null,cs,he=null,it=[];function bt(s){let{speed:e,easing:t,minimum:n}=c.progress,r=typeof X=="number";s=hs(s,n,1),X=s===1?null:s;let i=er(!r);i.offsetWidth,sr(o=>{if(i.style.transform=`translate3d(${ds(s)}%,0,0)`,i.style.transition=`all ${e}ms ${t}`,s!==1)return setTimeout(o,e);i.style.transition="none",i.style.opacity="1",i.offsetWidth,setTimeout(()=>{i.style.transition=`all ${e}ms ${t}`,i.style.opacity="0",setTimeout(()=>[tr(),o()],e)},e)})}function us(s){let e=X;if(!e)return wt();if(e<1)return typeof s!="number"&&(e>=0&&e<.2?s=.1:e>=.2&&e<.5?s=.04:e>=.5&&e<.8?s=.02:e>=.8&&e<.99?s=.005:s=0),e=hs(e+s,0,.994),bt(e)}function er(s){if(he)return he;document.documentElement.classList.add("spx-load");let e=s?"-100":ds(X||0),t=document.createElement("div");return t.id="spx-progress",t.style.pointerEvents="none",t.style.background=c.progress.background,t.style.height=c.progress.height,t.style.position="fixed",t.style.zIndex="9999999",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.transition="all 0 linear",t.style.transform=`translate3d(${e}%,0,0)`,document.body.appendChild(t),he=t,t}function tr(){document.documentElement.classList.remove("spx-load"),document.getElementById("spx-progress")&&document.body.removeChild(he),he=null}function hs(s,e,t){return s<e?e:s>t?t:s}function ds(s){return(-1+s)*100}function sr(s){let e=()=>{let t=it.shift();t&&t(e)};it.push(s),it.length===1&&e()}function wt(s){!c.progress||(cs=setTimeout(function(){X||bt(0);let e=function(){setTimeout(()=>{!X||(us(),e())},c.progress.trickleSpeed)};c.progress.trickle&&e()},s||0))}function nr(s){if(clearTimeout(cs),!(!s&&!X))return us(.3+.5*Math.random()),bt(1)}function rr(s){return new Promise((e,t)=>{let n=document.createElement("script");n.addEventListener("error",t,{once:!0}),n.async=!1,n.text=s.target.text;for(let{nodeName:r,nodeValue:i}of s.target.attributes)n.setAttribute(r,i);document.contains(s.target)?s.target.replaceWith(n):(document.head.append(n),s.external?n.addEventListener("load",()=>n.remove(),{once:!0}):n.remove()),s.external?n.addEventListener("load",()=>e(),{once:!0}):e()})}function ir(s){if(!s.hasAttribute("src")&&!s.text)return;let e=s.type?s.type.trim().toLowerCase():"text/javascript",t=Bn.test(e)?1:e==="module"?2:NaN,n=E(null);return n.blocking=!0,n.evaluate=!1,n.external=!1,isNaN(t)||s.noModule&&t===1||(s.src&&(n.external=!0),(t!==1||n.external&&(s.hasAttribute("async")||s.defer))&&(n.blocking=!1),n.evaluate=!0,n.target=s),n}function zt(s){return b(this,null,function*(){try{let e=rr(s);s.blocking&&(yield e)}catch(e){console.error(e)}})}function or(s){return b(this,null,function*(){let e=de(s,ir).filter(t=>t.evaluate).reduce((t,n)=>b(this,null,function*(){return n.external?Promise.all([t,zt(n)]):(yield t,yield zt(n))}),Promise.resolve());yield Promise.race([e])})}function ar(s,e){return s.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_PRECEDING||-1}function lr(s){return b(this,null,function*(){let e=de(s.querySelectorAll(c.selectors.scripts));e.sort(ar),yield or(e)})}function cr(s){s.querySelectorAll(c.selectors.tracking).forEach(e=>{!e.hasAttribute("id")||jt.has(e.id)||(document.body.appendChild(e),jt.add(e.id))})}function ur(s,e){let t=s.target;if(t.length===1&&t[0]==="body")return document.body.replaceWith(e.body);let n=t.join(","),r=document.body.querySelectorAll(n),i=e.body.querySelectorAll(n);r.forEach((o,a)=>{if(o.matches(t[a])&&V("render",o,i[a])&&(o.replaceWith(i[a]),s.append||s.prepend)){let l=document.createElement("div");return e.childNodes.forEach(l.appendChild),s.append?o.appendChild(l):o.insertBefore(l,o.firstChild)}}),cr(e.body)}function hr(s,e){let t=s.hydrate.join(","),n=document.body.querySelectorAll(t);if(n.length>0){let r=e.body.querySelectorAll(t);n.forEach((i,o)=>{!r[o]||!V("hydrate",i,r[o])||(i.firstChild.nodeType===Node.TEXT_NODE?i.innerHTML=r[o].innerHTML:i.replaceWith(r[o]))})}s.type=7,U(s),Hn(s.key)}function K(s){document.title=s.title,yt(),vt(),fe();let e=Me($[s.uuid]);return s.type===8?hr(s,e):(ur(s,e),scrollTo(s.position.x,s.position.y)),lr(e.head),nr(),os(),ls(),as(),V("load",s),s}function fs(s){let e=E(null);return e.key=s.key,e.rev=s.rev,e.title=s.title,e.position=s.position,e}function dr(){return document.readyState==="complete"}function fr(){return F.state!==null&&m(F.state,"rev")&&F.state.key!==F.state.rev}function pr(s){return F.replaceState(fs(s),s.title,s.key),s}function Et(s){return F.pushState(fs(s),s.title,s.key),s}var Ht;function ps(s){if(dr()&&s.state!==null){if(clearInterval(Ht),L(s.state.key))return gt(s.state.rev),K(f[s.state.key]);Ht=setTimeout(function(){return b(this,null,function*(){s.state.type=6;let e=yield T(s.state);if(!e)return location.assign(s.state.key);let t=se(location);if(e.key===t)return K(e);if(L(t))return K(f[t]);{let n=C(O(t,6));yield T(n),F.pushState(n,document.title,t)}})},200)}}function mr(){y.history||(addEventListener("popstate",ps,!1),y.history=!0)}function gr(){!y.history||(removeEventListener("popstate",ps,!1),y.history=!1)}function yr(s){return!(s.target&&s.target.isContentEditable||s.defaultPrevented||s.which>1||s.altKey||s.ctrlKey||s.metaKey||s.shiftKey)}function ee(s){if(!yr(s))return;let e=ft(s.target,c.selectors.hrefs);if(!e)return;let t=se(e.href);if(t===null||!V("visit",s))return;yt(),fe(),vt();let n={once:!0};if(L(t)){let r=Gt(e,f[t]),i=U(r);e.addEventListener("click",function(o){o.preventDefault(),f[i.rev].position=q(),Et(i),K(i)},n)}else if(m(Ce,t)){let r=f[t];qt(t),e.addEventListener("click",function(i){i.preventDefault(),f[r.rev].position=q(),at(r)},n)}else{qt(),ts(t);let r=O(e,7),i=C(r);T(i),e.addEventListener("click",function(o){o.preventDefault(),f[i.rev].position=q(),at(i)},n)}}function at(s){return b(this,null,function*(){wt(s.progress);let e=yield ss(s);if(e)Et(e),K(e);else return location.assign(s.key)})}function _t(s,e){return b(this,null,function*(){if(e){typeof e.cache=="string"&&(e.cache==="clear"?Oe():Oe(e.key)),wt(e.progress);let t=yield T(e);t?(Et(t),K(t)):location.assign(e.key)}else return at(f[s])})}function vr(){y.hrefs||(Ae==="mouseOnly"?addEventListener(`${W}down`,ee,!1):(Ae==="touchOnly"||addEventListener(`${W}down`,ee,!1),addEventListener("touchstart",ee,!1)),y.hrefs=!0)}function br(){!y.hrefs||(Ae==="mouseOnly"?removeEventListener(`${W}down`,ee,!1):(Ae==="touchOnly"||removeEventListener(`${W}down`,ee,!1),removeEventListener("touchstart",ee,!1)),y.hrefs=!1)}function wr(){mr();let s=C(O(1));return new Promise(e=>{document.addEventListener("DOMContentLoaded",()=>{vr(),os(),ls(),as();let t=Qt(s,document.documentElement.outerHTML);fr()&&(t.rev=F.state.rev),t.position=q(),pr(t),t.rev!==t.key&&setTimeout(()=>gt(t.rev)),setTimeout(()=>Xn(t)),e(t)},{once:!0})})}function Er(){gr(),br(),yt(),vt(),fe(),Oe(),w(1,"Disconnected \u{1F614}")}var ms=!!(window.history.pushState&&window.requestAnimationFrame&&window.addEventListener&&window.DOMParser);function kr(s={}){if(!ms)return w(4,"Browser does not support SPX");if(!window.location.protocol.startsWith("http"))return w(4,"Invalid protocol, SPX expects https or http protocol");Yt(s);let e=wr();return function(t){return b(this,null,function*(){let n=yield e;t(n),w(1,"Connection Established \u26A1")})}}function xr(s,e){if(s)if(e)s==="config"&&Yt(e),s==="observers"&&B(y,e);else{if(s==="config")return c;if(s==="observers")return y;if(s==="pages")return f;if(s==="snapshots")return $;if(s==="memory")return It(P.bytes)}let t=E(null);return t.config=c,t.snapshots=$,t.pages=f,t.observers=y,t.memory=P,t.memory.size=It(t.memory.bytes),t}function Ar(s,e){return b(this,null,function*(){if(s===void 0)return Rt();if(typeof s=="string"){let t=se(s);L(t)||w(4,`No store exists at: ${t}`);let n=Rt(t);return e!==void 0?U(B(n.page,e)):n}if(typeof s=="object")return U(s)})}function Or(s){return b(this,null,function*(){let e=f[F.state.key];s&&B(e,s),e.type=10;let t=yield T(e);return t?(w(1,"Triggered reload, page was re-cached"),K(t)):(w(2,"Reload failed, triggering refresh (cache will be purged)"),location.assign(e.key))})}function Cr(s){return b(this,null,function*(){let e=O(s,3);e.location.origin!==Se&&w(4,"Cross origin fetches are not allowed");let t=yield mt(e.key);if(t)return Me(t)})}function Sr(s){return Oe(s)}function Mr(s,e){return b(this,null,function*(){let t=O(8);t.position=q(),t.hydrate=e;let n=yield mt(s);if(!n)return w(2,"Hydration fetch failed");let r=L(t.key)?U(t,n):C(t);return setTimeout(()=>gt(t.rev)),K(r)})}function $r(s){return b(this,null,function*(){let e=O(s,2);if(L(e.key)){w(2,`Cache already exists for ${e.key}, prefetch skipped`);return}let t=yield T(C(e));if(t)return t;w(4,`Prefetch failed for ${e.key}`)})}function Tr(s,e){return b(this,null,function*(){let t=O(s),n=typeof e=="object"?B(t,e):t;return L(t.key)?_t(t.key,U(n)):_t(t.key,C(n))})}var $e={supported:ms,on:dt,off:zn,connect:kr,session:xr,state:Ar,reload:Or,fetch:Cr,clear:Sr,hydrate:Mr,prefetch:$r,visit:Tr,disconnect:Er};var pe=class extends M{initialize(){this.accordion=Dt(this.element,{multiple:this.multipleValue,persist:this.persistValue})}disconnect(){this.accordion.destroy()}goto({target:t}){$e.visit("/"+t.dataset.href)}open({target:{dataset:{index:t}}}){return this.accordion.folds[parseInt(t)].open()}close({target:{dataset:{index:t}}}){return this.accordion.folds[parseInt(t)].close()}};pe.values={multiple:{type:Boolean,default:!1},persist:{type:Boolean,default:!0}};var Y=class extends M{constructor(){super(...arguments);this.toggle=t=>(t.preventDefault(),t.target instanceof Element&&t.target.getAttribute("data-spinner")==="true"&&t.target.classList.add("loading"),this.openValue=!this.openValue,this.openValue?this.doOpen():this.doClose());this.touchMove=t=>{this.openValue&&this.element.scrollHeight<=this.element.clientHeight&&t.preventDefault()};this.keyboard=t=>{(t.keyCode===27||t.keyCode===32)&&this.doClose()};this.doClose=()=>{this.application.element.classList.remove("drawer-open"),this.element instanceof HTMLElement&&(this.element.classList.remove("drawer-active"),this.element.removeEventListener("touchstart",this.touchStart),this.overlay.removeEventListener("click",this.doClose)),this.openValue=!1}}initialize(){this.element.classList.contains("d-none")&&this.element.classList.remove("d-none")}connect(){this.buttons.forEach(t=>t.addEventListener("click",this.toggle)),window.innerWidth<400&&dt("load",()=>{this.openValue&&setTimeout(this.doClose,100)})}disconnect(){this.buttons.forEach(t=>t.removeEventListener("click",this.toggle))}click(){this.openValue&&this.doClose()}doOpen(){this.application.element.classList.add("drawer-open"),this.overlay.addEventListener("click",this.doClose.bind(this),{passive:!0}),this.element instanceof HTMLElement&&(this.element.focus(),this.element.addEventListener("touchstart",this.touchStart,{passive:!0}),this.element.classList.add("drawer-active"))}touchStart({target:t}){if(t instanceof HTMLElement){let{scrollTop:n,offsetHeight:r}=t,i=n+r;n===0?t.scrollTop=1:i===n&&(t.scrollTop=n-1)}}get transition(){let t=document.createElement("div"),n={transition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(let r in n)if(t.style[r]!==void 0)return n[r]}get buttons(){let t=`[data-drawer="${this.element.id}"]`;return this.application.element.lastElementChild.querySelectorAll(t)}get overlay(){return this.application.element.lastElementChild.querySelector("#drawer-overlay")}};Y.values={open:{type:Boolean,default:!1}},Y.targets=["mount"],Y.classes=["overlay"];function kt(){return kt=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=t[n])}return s},kt.apply(this,arguments)}var Br=function(){function s(t,n){var r=this,i=typeof n<"u"?n:{};this.version="3.7.11",this.userAgent=window.navigator.userAgent||"no `userAgent` provided by the browser",this.props={customStickyChangeNumber:i.customStickyChangeNumber||null,noStyles:i.noStyles||!1,stickyBitStickyOffset:i.stickyBitStickyOffset||0,parentClass:i.parentClass||"js-stickybit-parent",scrollEl:typeof i.scrollEl=="string"?document.querySelector(i.scrollEl):i.scrollEl||window,stickyClass:i.stickyClass||"js-is-sticky",stuckClass:i.stuckClass||"js-is-stuck",stickyChangeClass:i.stickyChangeClass||"js-is-sticky--change",useStickyClasses:i.useStickyClasses||!1,useFixed:i.useFixed||!1,useGetBoundingClientRect:i.useGetBoundingClientRect||!1,verticalPosition:i.verticalPosition||"top",applyStyle:i.applyStyle||function(N,J){return r.applyStyle(N,J)}},this.props.positionVal=this.definePosition()||"fixed",this.instances=[];var o=this.props,a=o.positionVal,l=o.verticalPosition,p=o.noStyles,S=o.stickyBitStickyOffset,g=l==="top"&&!p?S+"px":"",k=a!=="fixed"?a:"";this.els=typeof t=="string"?document.querySelectorAll(t):t,"length"in this.els||(this.els=[this.els]);for(var h=0;h<this.els.length;h++){var u,v=this.els[h],d=this.addInstance(v,this.props);this.props.applyStyle({styles:(u={},u[l]=g,u.position=k,u),classes:{}},d),this.manageState(d),this.instances.push(d)}}var e=s.prototype;return e.definePosition=function(){var n;if(this.props.useFixed)n="fixed";else{for(var r=["","-o-","-webkit-","-moz-","-ms-"],i=document.head.style,o=0;o<r.length;o+=1)i.position=r[o]+"sticky";n=i.position?i.position:"fixed",i.position=""}return n},e.addInstance=function(n,r){var i=this,o={el:n,parent:n.parentNode,props:r};if(r.positionVal==="fixed"||r.useStickyClasses){this.isWin=this.props.scrollEl===window;var a=this.isWin?window:this.getClosestParent(o.el,o.props.scrollEl);this.computeScrollOffsets(o),this.toggleClasses(o.parent,"",r.parentClass),o.state="default",o.stateChange="default",o.stateContainer=function(){return i.manageState(o)},a.addEventListener("scroll",o.stateContainer)}return o},e.getClosestParent=function(n,r){var i=r,o=n;if(o.parentElement===i)return i;for(;o.parentElement!==i;)o=o.parentElement;return i},e.getTopPosition=function(n){if(this.props.useGetBoundingClientRect)return n.getBoundingClientRect().top+(this.props.scrollEl.pageYOffset||document.documentElement.scrollTop);var r=0;do r=n.offsetTop+r;while(n=n.offsetParent);return r},e.computeScrollOffsets=function(n){var r=n,i=r.props,o=r.el,a=r.parent,l=!this.isWin&&i.positionVal==="fixed",p=i.verticalPosition!=="bottom",S=l?this.getTopPosition(i.scrollEl):0,g=l?this.getTopPosition(a)-S:this.getTopPosition(a),k=i.customStickyChangeNumber!==null?i.customStickyChangeNumber:o.offsetHeight,h=g+a.offsetHeight;r.offset=l?0:S+i.stickyBitStickyOffset,r.stickyStart=p?g-r.offset:0,r.stickyChange=r.stickyStart+k,r.stickyStop=p?h-(o.offsetHeight+r.offset):h-window.innerHeight},e.toggleClasses=function(n,r,i){var o=n,a=o.className.split(" ");i&&a.indexOf(i)===-1&&a.push(i);var l=a.indexOf(r);l!==-1&&a.splice(l,1),o.className=a.join(" ")},e.manageState=function(n){var r=this,i=n,o=i.props,a=i.state,l=i.stateChange,p=i.stickyStart,S=i.stickyChange,g=i.stickyStop,k=o.positionVal,h=o.scrollEl,u=o.stickyClass,v=o.stickyChangeClass,d=o.stuckClass,N=o.verticalPosition,J=N!=="bottom",ne=o.applyStyle,me=o.noStyles,At=function(re){re()},bs=this.isWin&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame)||At,j=this.isWin?window.scrollY||window.pageYOffset:h.scrollTop,ws=j>p&&j<g&&(a==="default"||a==="stuck"),Es=J&&j<=p&&(a==="sticky"||a==="stuck"),ks=j>=g&&a==="sticky";ws?i.state="sticky":Es?i.state="default":ks&&(i.state="stuck");var Ot=j>=S&&j<=g,xs=j<S/2||j>g;xs?i.stateChange="default":Ot&&(i.stateChange="sticky"),!(a===i.state&&l===i.stateChange)&&bs(function(){var ge,re,Le,Be,Fe,ie,Ct={sticky:{styles:(ge={position:k,top:"",bottom:""},ge[N]=o.stickyBitStickyOffset+"px",ge),classes:(re={},re[u]=!0,re)},default:{styles:(Le={},Le[N]="",Le),classes:{}},stuck:{styles:kt((Be={},Be[N]="",Be),k==="fixed"&&!me||!r.isWin?{position:"absolute",top:"",bottom:"0"}:{}),classes:(Fe={},Fe[d]=!0,Fe)}};k==="fixed"&&(Ct.default.styles.position="");var ye=Ct[i.state];ye.classes=(ie={},ie[d]=!!ye.classes[d],ie[u]=!!ye.classes[u],ie[v]=Ot,ie),ne(ye,n)})},e.applyStyle=function(n,r){var i=n.styles,o=n.classes,a=r,l=a.el,p=a.props,S=l.style,g=p.noStyles,k=l.className.split(" ");for(var h in o){var u=o[h];if(u)k.indexOf(h)===-1&&k.push(h);else{var v=k.indexOf(h);v!==-1&&k.splice(v,1)}}if(l.className=k.join(" "),i.position&&(S.position=i.position),!g)for(var d in i)S[d]=i[d]},e.update=function(n){var r=this;return n===void 0&&(n=null),this.instances.forEach(function(i){if(r.computeScrollOffsets(i),n)for(var o in n)i.props[o]=n[o]}),this},e.removeInstance=function(n){var r,i,o=n.el,a=n.props;this.applyStyle({styles:(r={position:""},r[a.verticalPosition]="",r),classes:(i={},i[a.stickyClass]="",i[a.stuckClass]="",i)},n),this.toggleClasses(o.parentNode,a.parentClass)},e.cleanup=function(){for(var n=0;n<this.instances.length;n+=1){var r=this.instances[n];r.stateContainer&&r.props.scrollEl.removeEventListener("scroll",r.stateContainer),this.removeInstance(r)}this.manageState=!1,this.instances=[]},s}();function Fr(s,e){return new Br(s,e)}var Te=Fr;var xt=new Map;var Vr=s=>xt.has(s)?xt.get(s):!1;var Nr=s=>{let e=Array.from(xt.values()).map(({screen:t})=>t);return s?e.filter(({id:t})=>s.includes(t)):e},gs=s=>{let e=Nr();if(s){let n=Vr(s);return n?n.screen.active:!1}let t=e.filter(({active:n})=>n===!0);return t.length>1?t:t[0]};function ys(s){let e=s.getBoundingClientRect(),t=e.top<0,n=e.left<0,r=e.bottom>(window.innerHeight||document.documentElement.clientHeight),i=e.right>(window.innerWidth||document.documentElement.clientWidth);return t||n||r||i}function vs(s){return s.split("|").some(gs)}var G=class extends M{constructor(){super(...arguments);this.inViewport=()=>{ys(this.viewportTarget)&&console.log("outofview")}}initialize(){this.target=this.element,this.enabled=this.hasBreakpointValue?vs(this.breakpointValue):!0,this.enabled&&(this.options={},this.hasBottomValue&&this.bottomValue&&(this.options.verticalPosition="bottom"),this.hasBoundingValue&&(this.options.useGetBoundingClientRect=this.boundingValue),this.hasNoStylesValue&&(this.options.noStyles=this.noStylesValue),this.hasOffsetValue&&(this.options.stickyBitStickyOffset=this.offsetValue),this.hasScrollElementValue&&(this.options.scrollEl=this.scrollElementValue),this.hasUseFixedValue&&(this.options.useFixed=this.useFixedValue),(this.hasParentClass||this.hasStuckClass||this.hasStickyClass)&&(this.options.useStickyClasses=!0))}connect(){if(!this.enabled&&this.sticky instanceof Te)this.disconnect();else{if(!this.enabled)return;this.hasOffsetElementValue&&(this.options.stickyBitStickyOffset=this.getElementOffset()),this.hasUseParentValue&&this.useParentValue?this.sticky=Te(this.target.parentElement,this.options):this.sticky=Te(this.target,this.options)}}disconnect(){this.sticky&&this.sticky.cleanup(),this.hasViewportTarget&&removeEventListener("scroll",this.inViewport,!1)}getElementOffset(){let t=this.offsetElementValue.split(","),n=0;for(let r of t){let{offsetHeight:i}=document.querySelector(r);n+=i}return n}};G.targets=["viewport","fallback"],G.values={useParent:Boolean,breakpoint:String,offset:Number,useFixed:Boolean,noStyles:Boolean,bottom:Boolean,bounding:Boolean,scrollElement:Boolean,offsetElement:String,next:String},G.classes=["parent","sticky","stuck"];$e.connect({targets:["#main"],hover:{trigger:"href"},progress:!1})(s=>{let e=ke.start();e.register("drawer",Y),e.register("accordion",pe),e.register("sticky",G)});
/*! Bundled license information:

stickybits/dist/stickybits.es.js:
  (**
    stickybits - Stickybits is a lightweight alternative to `position: sticky` polyfills
    @version v3.7.11
    @link https://github.com/yowainwright/stickybits#readme
    @author Jeff Wainwright <yowainwright@gmail.com> (https://jeffry.in)
    @license MIT
  **)
*/
